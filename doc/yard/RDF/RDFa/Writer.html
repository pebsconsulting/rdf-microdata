<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Class: RDF::RDFa::Writer</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (W)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../RDFa.html" title="RDF::RDFa (module)">RDFa</a></span></span>
     &raquo; 
    <span class="title">Writer</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: RDF::RDFa::Writer
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Writer</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Writer</li>
          
            <li class="next">RDF::RDFa::Writer</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/rdf/rdfa/writer.rb<span class="defines">,<br />
  lib/rdf/rdfa/writer/haml_templates.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>An RDFa 1.1 serialiser in Ruby. The RDFa serializer makes use of Haml templates,
allowing runtime-replacement with alternate templates. Note, however, that templates
should be checked against the W3C test suite to ensure that valid RDFa is emitted.</p>

<p>Note that the natural interface is to write a whole graph at a time.
Writing statements or Triples will create a graph to add them to
and then serialize the graph.</p>

<p>The writer will add prefix definitions, and use them for creating @prefix definitions, and minting CURIEs</p>

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'><p>Obtaining a RDFa writer class</p></div></h4>
      <pre class="example code"><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Writer constant id'>Writer</span><span class='dot token'>.</span><span class='for identifier id'>for</span><span class='lparen token'>(</span><span class='symbol val'>:html</span><span class='rparen token'>)</span>         <span class='comment val'>#=&gt; RDF::RDFa::Writer</span>
<span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Writer constant id'>Writer</span><span class='dot token'>.</span><span class='for identifier id'>for</span><span class='lparen token'>(</span><span class='string val'>&quot;etc/test.html&quot;</span><span class='rparen token'>)</span>
<span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Writer constant id'>Writer</span><span class='dot token'>.</span><span class='for identifier id'>for</span><span class='lparen token'>(</span><span class='symbol val'>:file_name</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;etc/test.html&quot;</span><span class='rparen token'>)</span>
<span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Writer constant id'>Writer</span><span class='dot token'>.</span><span class='for identifier id'>for</span><span class='lparen token'>(</span><span class='symbol val'>:file_extension</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;html&quot;</span><span class='rparen token'>)</span>
<span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Writer constant id'>Writer</span><span class='dot token'>.</span><span class='for identifier id'>for</span><span class='lparen token'>(</span><span class='symbol val'>:content_type</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;application/xhtml+xml&quot;</span><span class='rparen token'>)</span>
<span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Writer constant id'>Writer</span><span class='dot token'>.</span><span class='for identifier id'>for</span><span class='lparen token'>(</span><span class='symbol val'>:content_type</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;text/html&quot;</span><span class='rparen token'>)</span>
</pre>
    
      <h4><div class='inline'><p>Serializing RDF graph into an XHTML+RDFa file</p></div></h4>
      <pre class="example code"><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='RDFa constant id'>RDFa</span><span class='colon2 op'>::</span><span class='Write constant id'>Write</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='string val'>&quot;etc/test.html&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='writer identifier id'>writer</span><span class='bitor op'>|</span>
  <span class='writer identifier id'>writer</span> <span class='lshft op'>&lt;&lt;</span> <span class='graph identifier id'>graph</span>
<span class='end end kw'>end</span>
</pre>
    
      <h4><div class='inline'><p>Serializing RDF statements into an XHTML+RDFa file</p></div></h4>
      <pre class="example code"><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='RDFa constant id'>RDFa</span><span class='colon2 op'>::</span><span class='Writer constant id'>Writer</span><span class='dot token'>.</span><span class='open identifier id'>open</span><span class='lparen token'>(</span><span class='string val'>&quot;etc/test.html&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='writer identifier id'>writer</span><span class='bitor op'>|</span>
  <span class='graph identifier id'>graph</span><span class='dot token'>.</span><span class='each_statement identifier id'>each_statement</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='statement identifier id'>statement</span><span class='bitor op'>|</span>
    <span class='writer identifier id'>writer</span> <span class='lshft op'>&lt;&lt;</span> <span class='statement identifier id'>statement</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    
      <h4><div class='inline'><p>Serializing RDF statements into an XHTML+RDFa string</p></div></h4>
      <pre class="example code"><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='RDFa constant id'>RDFa</span><span class='colon2 op'>::</span><span class='Writer constant id'>Writer</span><span class='dot token'>.</span><span class='buffer identifier id'>buffer</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='writer identifier id'>writer</span><span class='bitor op'>|</span>
  <span class='graph identifier id'>graph</span><span class='dot token'>.</span><span class='each_statement identifier id'>each_statement</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='statement identifier id'>statement</span><span class='bitor op'>|</span>
    <span class='writer identifier id'>writer</span> <span class='lshft op'>&lt;&lt;</span> <span class='statement identifier id'>statement</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    
      <h4><div class='inline'><p>Creating @base and @prefix definitions in output</p></div></h4>
      <pre class="example code"><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='RDFa constant id'>RDFa</span><span class='colon2 op'>::</span><span class='Writer constant id'>Writer</span><span class='dot token'>.</span><span class='buffer identifier id'>buffer</span><span class='lparen token'>(</span><span class='symbol val'>:base_uri</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;http://example.com/&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:prefixes</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span>
    <span class='symbol val'>:foaf</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;http://xmlns.com/foaf/0.1/&quot;</span><span class='rbrace token'>}</span>
<span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='writer identifier id'>writer</span><span class='bitor op'>|</span>
  <span class='graph identifier id'>graph</span><span class='dot token'>.</span><span class='each_statement identifier id'>each_statement</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='statement identifier id'>statement</span><span class='bitor op'>|</span>
    <span class='writer identifier id'>writer</span> <span class='lshft op'>&lt;&lt;</span> <span class='statement identifier id'>statement</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    
      <h4><div class='inline'><p>Creating @profile definitions in output</p></div></h4>
      <pre class="example code"><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='RDFa constant id'>RDFa</span><span class='colon2 op'>::</span><span class='Writer constant id'>Writer</span><span class='dot token'>.</span><span class='buffer identifier id'>buffer</span><span class='lparen token'>(</span><span class='symbol val'>:profile</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;http://example.com/profile&quot;</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='writer identifier id'>writer</span><span class='bitor op'>|</span>
  <span class='graph identifier id'>graph</span><span class='dot token'>.</span><span class='each_statement identifier id'>each_statement</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='statement identifier id'>statement</span><span class='bitor op'>|</span>
    <span class='writer identifier id'>writer</span> <span class='lshft op'>&lt;&lt;</span> <span class='statement identifier id'>statement</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    
  </div>
<h3>Author:</h3>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'><p><a href="http://kellogg-assoc.com/">Gregg Kellogg</a></p></div>
      
    </li>
  
</ul>

</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="HAML_OPTIONS-constant" class="">HAML_OPTIONS =
          
        </dt>
        <dd><pre class="code"><span class='lbrace token'>{</span>
  <span class='symbol val'>:ugly</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='false false kw'>false</span><span class='comma token'>,</span> <span class='comment val'># to preserve whitespace without using entities</span>
<span class='rbrace token'>}</span>
</pre></dd>
      
        <dt id="BASE_HAML-constant" class="">BASE_HAML =
          <div class="docstring">
  <div class="discussion">
    <p>The default set of HAML templates used for RDFa code generation</p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbrace token'>{</span>
  <span class='comment val'># Document</span>
  <span class='comment val'># Locals: language, title, profile, prefix, base, subjects</span>
  <span class='comment val'># Yield: subjects.each</span>
  <span class='symbol val'>:doc</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>%q(
    !!! XML
    !!! 5
    %html{:xmlns =&gt; &quot;http://www.w3.org/1999/xhtml&quot;, :lang =&gt; lang, :profile =&gt; profile, :prefix =&gt; prefix}
      - if base || title
        %head
          - if base
            %base{:href =&gt; base}
          - if title
            %title= title
      %body
        - subjects.each do |subject|
          != yield(subject)
  )</span><span class='comma token'>,</span>

  <span class='comment val'># Output for non-leaf resources</span>
  <span class='comment val'># Note that @about may be omitted for Nodes that are not referenced</span>
  <span class='comment val'>#</span>
  <span class='comment val'># If _rel_ and _resource_ are not nil, the tag will be written relative</span>
  <span class='comment val'># to a previous subject. If _element_ is :li, the tag will be written</span>
  <span class='comment val'># with &lt;li&gt; instead of &lt;div&gt;.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Note that @rel and @resource can be used together, or @about and @typeof, but</span>
  <span class='comment val'># not both.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Locals: subject, typeof, predicates, rel, element</span>
  <span class='comment val'># Yield: predicates.each</span>
  <span class='symbol val'>:subject</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>%q(
    - if element == :li
      %li{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
        - if typeof
          %span.type!= typeof
        - predicates.each do |predicate|
          != yield(predicate)
    - elsif rel &amp;&amp; typeof
      %div{:rel =&gt; get_curie(rel)}
        %div{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
          %span.type!= typeof
          - predicates.each do |predicate|
            != yield(predicate)
    - elsif rel
      %div{:rel =&gt; get_curie(rel), :resource =&gt; get_curie(subject)}
        - predicates.each do |predicate|
          != yield(predicate)
    - else
      %div{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
        - if typeof
          %span.type!= typeof
        - predicates.each do |predicate|
          != yield(predicate)
  )</span><span class='comma token'>,</span>

  <span class='comment val'># Output for single-valued properties</span>
  <span class='comment val'># Locals: property, objects</span>
  <span class='comment val'># Yields: object</span>
  <span class='comment val'># If nil is returned, render as a leaf</span>
  <span class='comment val'># Otherwise, render result</span>
  <span class='symbol val'>:property_value</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>%q(
    - object = objects.first
    - if heading_predicates.include?(predicate) &amp;&amp; object.literal?
      %h1{:property =&gt; get_curie(predicate), :content =&gt; get_content(object), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}= escape_entities(get_value(object))
    - else
      %div.property
        %span.label
          = get_predicate_name(predicate)
        - if res = yield(object)
          != res
        - elsif object.node?
          %span{:resource =&gt; get_curie(object), :rel =&gt; get_curie(predicate)}= get_curie(object)
        - elsif object.uri?
          %a{:href =&gt; object.to_s, :rel =&gt; get_curie(predicate)}= object.to_s
        - elsif object.datatype == RDF.XMLLiteral
          %span{:property =&gt; get_curie(predicate), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}&lt;!= get_value(object)
        - else
          %span{:property =&gt; get_curie(predicate), :content =&gt; get_content(object), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}= escape_entities(get_value(object))
  )</span><span class='comma token'>,</span>

  <span class='comment val'># Output for multi-valued properties</span>
  <span class='comment val'># Locals: property, rel, :objects</span>
  <span class='comment val'># Yields: object for leaf resource rendering</span>
  <span class='symbol val'>:property_values</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span>  <span class='string val'>%q(
    %div.property
      %span.label
        = get_predicate_name(predicate)
      %ul{:rel =&gt; (get_curie(rel) if rel), :property =&gt; (get_curie(property) if property)}
        - objects.each do |object|
          - if res = yield(object)
            != res
          - elsif object.node?
            %li{:resource =&gt; get_curie(object)}= get_curie(object)
          - elsif object.uri?
            %li
              %a{:href =&gt; object.to_s}= object.to_s
          - elsif object.datatype == RDF.XMLLiteral
            %li{:lang =&gt; get_lang(object), :datatype =&gt; get_curie(object.datatype)}&lt;!= get_value(object)
          - else
            %li{:content =&gt; get_content(object), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}= escape_entities(get_value(object))
  )</span><span class='comma token'>,</span>
<span class='rbrace token'>}</span>
</pre></dd>
      
        <dt id="MIN_HAML-constant" class="">MIN_HAML =
          <div class="docstring">
  <div class="discussion">
    <p>An alternative, minimal HAML template for RDFa code generation.
This version does not perform recursive object generation and does not attempt
to create human readable output.</p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbrace token'>{</span>
  <span class='comment val'># Document</span>
  <span class='comment val'># Locals: language, title, profile, prefix, base, subjects</span>
  <span class='comment val'># Yield: subjects.each</span>
  <span class='symbol val'>:doc</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>%q(
    !!! XML
    !!! 5
    %html{:xmlns =&gt; &quot;http://www.w3.org/1999/xhtml&quot;, :lang =&gt; lang, :profile =&gt; profile, :prefix =&gt; prefix}
      - if base
        %head
          %base{:href =&gt; base}
      %body
        - subjects.each do |subject|
          != yield(subject)
  )</span><span class='comma token'>,</span>

  <span class='comment val'># Output for non-leaf resources</span>
  <span class='comment val'># Note that @about may be omitted for Nodes that are not referenced</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Locals: about, typeof, predicates</span>
  <span class='comment val'># Yield: predicates.each</span>
  <span class='symbol val'>:subject</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>%q(
    - if element == :li
      %li{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
        - predicates.each do |predicate|
          != yield(predicate)
    - elsif rel &amp;&amp; typeof
      %div{:rel =&gt; get_curie(rel)}
        %div{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
          - predicates.each do |predicate|
            != yield(predicate)
    - elsif rel
      %div{:rel =&gt; get_curie(rel), :resource =&gt; get_curie(subject)}
        - predicates.each do |predicate|
          != yield(predicate)
    - else
      %div{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
        - predicates.each do |predicate|
          != yield(predicate)
  )</span><span class='comma token'>,</span>

  <span class='comment val'># Output for single-valued properties.</span>
  <span class='comment val'># This version does not perform a recursive call, and renders all objects as leafs.</span>
  <span class='comment val'># Locals: property, objects</span>
  <span class='comment val'># Yields: object</span>
  <span class='comment val'># If nil is returned, render as a leaf</span>
  <span class='comment val'># Otherwise, render result</span>
  <span class='symbol val'>:property_value</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>%q(
    - object = objects.first
    %div.property
      - if object.resource?
        %span{:resource =&gt; get_curie(object), :rel =&gt; get_curie(predicate)}
      - elsif object.datatype == RDF.XMLLiteral
        %span{:property =&gt; get_curie(predicate), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}&lt;!= get_value(object)
      - else
        %span{:property =&gt; get_curie(predicate), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}= escape_entities(object.to_s)
  )</span><span class='comma token'>,</span>

  <span class='comment val'># Output for multi-valued properties.</span>
  <span class='comment val'># This version does not perform a recursive call, and renders all objects as leafs.</span>
  <span class='comment val'># Locals: property, rel, :objects</span>
  <span class='comment val'># Yields: object for leaf resource rendering</span>
  <span class='symbol val'>:property_values</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span>  <span class='string val'>%q(
    %div.property
      %ul{:rel =&gt; (get_curie(rel) if rel), :property =&gt; (get_curie(property) if property)}
        - objects.each do |object|
          - if object.resource?
            %li{:resource =&gt; get_curie(object)}
          - elsif object.datatype == RDF.XMLLiteral
            %li{:lang =&gt; get_lang(object), :datatype =&gt; get_curie(object.datatype)}&lt;!= get_value(object)
          - else
            %li{:lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}= escape_entities(object.to_s)
  )</span><span class='comma token'>,</span>
<span class='rbrace token'>}</span>
</pre></dd>
      
        <dt id="DISTILLER_HAML-constant" class="">DISTILLER_HAML =
          
        </dt>
        <dd><pre class="code"><span class='lbrace token'>{</span>
  <span class='comment val'># Document</span>
  <span class='comment val'># Locals: language, title, profile, prefix, base, subjects</span>
  <span class='comment val'># Yield: subjects.each</span>
  <span class='symbol val'>:doc</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>%q(
    !!! XML
    !!! 5
    %html{:xmlns =&gt; &quot;http://www.w3.org/1999/xhtml&quot;, :lang =&gt; lang, :profile =&gt; profile, :prefix =&gt; prefix}
      - if base || title
        %head
          - if base
            %base{:href =&gt; base}
          - if title
            %title= title
          %link{:rel =&gt; &quot;stylesheet&quot;, :href =&gt; &quot;http://rdf.kellogg-assoc.com/css/distiller.css&quot;, :type =&gt; &quot;text/css&quot;}
          %script{:src =&gt; &quot;https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js&quot;, :type =&gt; &quot;text/javascript&quot;}
          %script{:src =&gt; &quot;http://rdf.kellogg-assoc.com/js/distiller.js&quot;, :type =&gt; &quot;text/javascript&quot;}
      %body
        - if base
          %p= &quot;RDFa serialization URI base: &amp;lt;#{base}&amp;gt;&quot;
        - subjects.each do |subject|
          != yield(subject)
        %footer
          %p= &quot;Written by &lt;a href='http://rdf.rubyforge.org/rdfa'&gt;RDF::RDFa&lt;/a&gt; version #{RDF::RDFa::VERSION}&quot;
  )</span><span class='comma token'>,</span>

  <span class='comment val'># Output for non-leaf resources</span>
  <span class='comment val'># Note that @about may be omitted for Nodes that are not referenced</span>
  <span class='comment val'>#</span>
  <span class='comment val'># If _rel_ and _resource_ are not nil, the tag will be written relative</span>
  <span class='comment val'># to a previous subject. If _element_ is :li, the tag will be written</span>
  <span class='comment val'># with &lt;li&gt; instead of &lt;div&gt;.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Note that @rel and @resource can be used together, or @about and @typeof, but</span>
  <span class='comment val'># not both.</span>
  <span class='comment val'>#</span>
  <span class='comment val'># Locals: subject, typeof, predicates, rel, element</span>
  <span class='comment val'># Yield: predicates.each</span>
  <span class='symbol val'>:subject</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>%q(
    - if element == :li
      %td{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
        - if typeof
          %span.type!= typeof
        %table.properties
          - predicates.each do |predicate|
            != yield(predicate)
    - elsif rel &amp;&amp; typeof
      %td{:rel =&gt; get_curie(rel)}
        %div{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
          %span.type!= typeof
          %table.properties
            - predicates.each do |predicate|
              != yield(predicate)
    - elsif rel
      %td{:rel =&gt; get_curie(rel), :resource =&gt; get_curie(subject)}
        %table.properties
          - predicates.each do |predicate|
            != yield(predicate)
    - else
      %div{:about =&gt; get_curie(subject), :typeof =&gt; typeof}
        - if typeof
          %span.type!= typeof
        %table.properties
          - predicates.each do |predicate|
            != yield(predicate)
  )</span><span class='comma token'>,</span>

  <span class='comment val'># Output for single-valued properties</span>
  <span class='comment val'># Locals: property, objects</span>
  <span class='comment val'># Yields: object</span>
  <span class='comment val'># If nil is returned, render as a leaf</span>
  <span class='comment val'># Otherwise, render result</span>
  <span class='symbol val'>:property_value</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>%q(
    - object = objects.first
    - if heading_predicates.include?(predicate) &amp;&amp; object.literal?
      %h1{:property =&gt; get_curie(predicate), :content =&gt; get_content(object), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}= escape_entities(get_value(object))
    - else
      %tr.property
        %td.label
          = get_predicate_name(predicate)
        - if res = yield(object)
          != res
        - elsif object.node?
          %td{:resource =&gt; get_curie(object), :rel =&gt; get_curie(predicate)}= get_curie(object)
        - elsif object.uri?
          %td
            %a{:href =&gt; object.to_s, :rel =&gt; get_curie(predicate)}= object.to_s
        - elsif object.datatype == RDF.XMLLiteral
          %td{:property =&gt; get_curie(predicate), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}&lt;!= get_value(object)
        - else
          %td{:property =&gt; get_curie(predicate), :content =&gt; get_content(object), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}= escape_entities(get_value(object))
  )</span><span class='comma token'>,</span>

  <span class='comment val'># Output for multi-valued properties</span>
  <span class='comment val'># Locals: property, rel, :objects</span>
  <span class='comment val'># Yields: object for leaf resource rendering</span>
  <span class='symbol val'>:property_values</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span>  <span class='string val'>%q(
    %tr.property
      %td.label
        = get_predicate_name(predicate)
      %td{:rel =&gt; (get_curie(rel) if rel), :property =&gt; (get_curie(property) if property)}
        %ul
          - objects.each do |object|
            - if res = yield(object)
              != res
            - elsif object.node?
              %li{:resource =&gt; get_curie(object)}= get_curie(object)
            - elsif object.uri?
              %li
                %a{:href =&gt; object.to_s}= object.to_s
            - elsif object.datatype == RDF.XMLLiteral
              %li{:lang =&gt; get_lang(object), :datatype =&gt; get_curie(object.datatype)}&lt;!= get_value(object)
            - else
              %li{:content =&gt; get_content(object), :lang =&gt; get_lang(object), :datatype =&gt; get_dt_curie(object)}= escape_entities(get_value(object))
  )</span><span class='comma token'>,</span>
<span class='rbrace token'>}</span>
</pre></dd>
      
        <dt id="HAML_TEMPLATES-constant" class="">HAML_TEMPLATES =
          
        </dt>
        <dd><pre class="code"><span class='lbrace token'>{</span><span class='symbol val'>:base</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='BASE_HAML constant id'>BASE_HAML</span><span class='comma token'>,</span> <span class='symbol val'>:min</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='MIN_HAML constant id'>MIN_HAML</span><span class='comma token'>,</span> <span class='symbol val'>:distiller</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='DISTILLER_HAML constant id'>DISTILLER_HAML</span><span class='rbrace token'>}</span>
</pre></dd>
      
        <dt id="DEFAULT_HAML-constant" class="">DEFAULT_HAML =
          
        </dt>
        <dd><pre class="code"><span class='BASE_HAML constant id'>BASE_HAML</span>
</pre></dd>
      
    </dl>
  


  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#base_uri-instance_method" title="#base_uri (instance method)">- (RDF::URI) <strong>base_uri</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Base URI used for relativizing URIs.</p></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#graph-instance_method" title="#graph (instance method)">- (Graph) <strong>graph</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Graph of statements serialized.</p></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#heading_predicates-instance_method" title="#heading_predicates (instance method)">- (Array&lt;URI&gt;) <strong>heading_predicates</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Defines order of predicates to use in heading.</p></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#predicate_order-instance_method" title="#predicate_order (instance method)">- (Array&lt;URI&gt;) <strong>predicate_order</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Defines order of predicates to to emit at begninning of a resource description.</p></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#top_classes-instance_method" title="#top_classes (instance method)">- (Array&lt;URI&gt;) <strong>top_classes</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Defines rdf:type of subjects to be emitted at the beginning of the document.</p></div></span>
  
</li>

    
  </ul>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_content-instance_method" title="#get_content (instance method)">- (String<sup>?</sup>) <strong>get_content</strong>(literal) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Haml rendering helper.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_curie-instance_method" title="#get_curie (instance method)">- (String) <strong>get_curie</strong>(resource) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Haml rendering helper.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_dt_curie-instance_method" title="#get_dt_curie (instance method)">- (String<sup>?</sup>) <strong>get_dt_curie</strong>(literal) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Haml rendering helper.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_lang-instance_method" title="#get_lang (instance method)">- (String<sup>?</sup>) <strong>get_lang</strong>(literal) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Haml rendering helper.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_predicate_name-instance_method" title="#get_predicate_name (instance method)">- (String) <strong>get_predicate_name</strong>(resource) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Haml rendering helper.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#get_value-instance_method" title="#get_value (instance method)">- (String) <strong>get_value</strong>(literal) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Haml rendering helper.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#haml_template-instance_method" title="#haml_template (instance method)">- (Hash&lt;Symbol =&gt; String&gt;) <strong>haml_template</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Writer) <strong>initialize</strong>(output = $stdout, options = {}) {|writer| ... }</a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Initializes the RDFa writer instance.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#order_properties-instance_method" title="#order_properties (instance method)">- (Array&lt;String&gt;) <strong>order_properties</strong>(properties) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Take a hash from predicate uris to lists of values.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#order_subjects-instance_method" title="#order_subjects (instance method)">- (Array&lt;Resource&gt;) <strong>order_subjects</strong> </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Order subjects for output.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#predicate-instance_method" title="#predicate (instance method)">- (String) <strong>predicate</strong>(predicate, objects) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Write a predicate with one or more values.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#preprocess-instance_method" title="#preprocess (instance method)">- (ignored) <strong>preprocess</strong> </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Perform any preprocessing of statements required.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#preprocess_statement-instance_method" title="#preprocess_statement (instance method)">- (ignored) <strong>preprocess_statement</strong>(statement) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Perform any statement preprocessing required.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#profile_repository-instance_method" title="#profile_repository (instance method)">- (RDF::Repository) <strong>profile_repository</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#profile_repository%3D-instance_method" title="#profile_repository= (instance method)">- (RDF::Repository) <strong>profile_repository=</strong>(repo) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#render_document-instance_method" title="#render_document (instance method)">- (Object) <strong>render_document</strong>(subjects, options = {}) {|subject| ... }</a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Render document using haml_template[:doc].</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#render_property-instance_method" title="#render_property (instance method)">- (Object) <strong>render_property</strong>(predicate, objects, property, rel, options = {}) {|object| ... }</a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Render a single- or multi-valued predicate using haml<em>template[:property</em>value] or haml<em>template[:property</em>values].</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#render_subject-instance_method" title="#render_subject (instance method)">- (Object) <strong>render_subject</strong>(subject, predicates, options = {}) {|predicate| ... }</a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Render a subject using haml_template[:subject].</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#reset-instance_method" title="#reset (instance method)">- (Object) <strong>reset</strong> </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reset parser to run again.</p></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#subject-instance_method" title="#subject (instance method)">- (Nokogiri::XML::Element, {Namespace}) <strong>subject</strong>(subject, options = {}) </a>
    

    
  </span>
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Display a subject.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_epilogue-instance_method" title="#write_epilogue (instance method)">- <strong>write_epilogue</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Outputs the XHTML+RDFa representation of all stored triples.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_graph-instance_method" title="#write_graph (instance method)">- <strong>write_graph</strong>(graph) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Write whole graph.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_statement-instance_method" title="#write_statement (instance method)">- <strong>write_statement</strong>(statement) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Addes a statement to be serialized.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write_triple-instance_method" title="#write_triple (instance method)">- <strong>write_triple</strong>(subject, predicate, object) </a>
    

    
  </span>
  
  
  
  <span class="abstract note title">Abstract</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Addes a triple to be serialized.</p></div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::RDFa::Writer (class)">Writer</a></span></tt>) <strong>initialize</strong>(output = $stdout, options = {}) {|writer| ... }
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Initializes the RDFa writer instance.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>IO</tt>, <tt>File</tt>)</span>
      
      
        <span class='name'>output</span>
      
      
        <em class="default">(defaults to: <tt>$stdout</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the output stream</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Hash{Symbol =&gt; Object}</tt>)</span>
      
      
        <span class='name'>options</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>any additional options</p></div>
      
    </li>
  
</ul>

  
    
    
    
    
    <h3>Options Hash (<tt>options</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="name">:canonicalize</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          &mdash; <div class='inline'><p>whether to canonicalize literals when serializing</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>Hash</tt>)</span>
          <span class="name">:prefixes</span>
          <span class="default">
            
              &mdash; default:
              <tt>Hash.new</tt>
            
          </span>
          &mdash; <div class='inline'><p>the prefix mappings to use</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>#to_a</tt>)</span>
          <span class="name">:profiles</span>
          <span class="default">
            
              &mdash; default:
              <tt>Array.new</tt>
            
          </span>
          &mdash; <div class='inline'><p>List of profiles to add to document. This will use terms, prefix definitions and default-vocabularies
identified within the profiles (taken in reverse order) to determine how to serialize terms</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>#to_s</tt>)</span>
          <span class="name">:base_uri</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>the base URI to use when constructing relative URIs, set as html>head>base.href</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>#to_s</tt>)</span>
          <span class="name">:lang</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Output as root @lang attribute, and avoid generation <em>@lang</em> where possible</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="name">:standard_prefixes</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          &mdash; <div class='inline'><p>Add standard prefixes to <em>prefixes</em>, if necessary.</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>Repository</tt>)</span>
          <span class="name">:profile_repository</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Repository to find and save profile graphs.</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>Array&lt;RDF::URI&gt;</tt>)</span>
          <span class="name">:top_classes</span>
          <span class="default">
            
              &mdash; default:
              <tt>[RDF::RDFS.Class]</tt>
            
          </span>
          &mdash; <div class='inline'><p>Defines rdf:type of subjects to be emitted at the beginning of the document.</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>Array&lt;RDF::URI&gt;</tt>)</span>
          <span class="name">:predicate_order</span>
          <span class="default">
            
              &mdash; default:
              <tt>[RDF.type</tt>, <tt>RDF::RDFS.label</tt>, <tt>RDF::DC.title]</tt>
            
          </span>
          &mdash; <div class='inline'><p>Defines order of predicates to to emit at begninning of a resource description..</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>Array&lt;RDF::URI&gt;</tt>)</span>
          <span class="name">:heading_predicates</span>
          <span class="default">
            
              &mdash; default:
              <tt>[RDF::RDFS.label</tt>, <tt>RDF::DC.title]</tt>
            
          </span>
          &mdash; <div class='inline'><p>Defines order of predicates to use in heading.</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>Symbol</tt>, <tt>Hash{Symbol =&gt; <span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>}</tt>)</span>
          <span class="name">:haml</span>
          <span class="default">
            
              &mdash; default:
              <tt>DEFAULT_HAML</tt>
            
          </span>
          &mdash; <div class='inline'><p>HAML templates used for generating code</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>Hash</tt>)</span>
          <span class="name">:haml_options</span>
          <span class="default">
            
              &mdash; default:
              <tt>HAML_OPTIONS</tt>
            
          </span>
          &mdash; <div class='inline'><p>Options to pass to Haml::Engine.new. Default options set :ugly => false
to ensure that whitespace in literals with newlines is properly preserved.</p></div>
        </tr>
      
    </ul>
  
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
        <span class='type'>(<tt>writer</tt>)</span>
      
      
      
      
    </li>
  
</ul>
<h3>Yield Parameters:</h3>
<ul class="yieldparam">
  
    <li>
      
        <span class='type'>(<tt>RDF::Writer</tt>)</span>
      
      
        <span class='name'>writer</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


123
124
125
126
127
128
129
130
131
132
133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 123</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='output identifier id'>output</span> <span class='assign token'>=</span> <span class='$stdout gvar id'>$stdout</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='profile_repository identifier id'>profile_repository</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:profile_repository</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:profile_repository</span><span class='rbrack token'>]</span>
  <span class='super super kw'>super</span> <span class='do do kw'>do</span>
    <span class='@uri_to_term_or_curie ivar id'>@uri_to_term_or_curie</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
    <span class='@uri_to_prefix ivar id'>@uri_to_prefix</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
    <span class='@top_classes ivar id'>@top_classes</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:top_classes</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='RDFS constant id'>RDFS</span><span class='dot token'>.</span><span class='Class constant id'>Class</span><span class='rbrack token'>]</span>
    <span class='@predicate_order ivar id'>@predicate_order</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:predicate_order</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='RDF constant id'>RDF</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='comma token'>,</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='RDFS constant id'>RDFS</span><span class='dot token'>.</span><span class='label identifier id'>label</span><span class='comma token'>,</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='DC constant id'>DC</span><span class='dot token'>.</span><span class='title identifier id'>title</span><span class='rbrack token'>]</span>
    <span class='@heading_predicates ivar id'>@heading_predicates</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:heading_predicates</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='lbrack token'>[</span><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='RDFS constant id'>RDFS</span><span class='dot token'>.</span><span class='label identifier id'>label</span><span class='comma token'>,</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='DC constant id'>DC</span><span class='dot token'>.</span><span class='title identifier id'>title</span><span class='rbrack token'>]</span>
    <span class='@graph ivar id'>@graph</span> <span class='assign token'>=</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Graph constant id'>Graph</span><span class='dot token'>.</span><span class='new identifier id'>new</span>

    <span class='block identifier id'>block</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="base_uri=-instance_method"></span>
      <span id="base_uri-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="base_uri-instance_method">
  
    - (<tt>RDF::URI</tt>) <strong>base_uri</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Base URI used for relativizing URIs</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>RDF::URI</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>Base URI used for relativizing URIs</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 86</span>

<span class='def def kw'>def</span> <span class='base_uri identifier id'>base_uri</span>
  <span class='@base_uri ivar id'>@base_uri</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="graph=-instance_method"></span>
      <span id="graph-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="graph-instance_method">
  
    - (<tt><span class='object_link'><a href="../Graph.html" title="RDF::Graph (class)">Graph</a></span></tt>) <strong>graph</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Graph of statements serialized</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Graph.html" title="RDF::Graph (class)">Graph</a></span></tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>Graph of statements serialized</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 83</span>

<span class='def def kw'>def</span> <span class='graph identifier id'>graph</span>
  <span class='@graph ivar id'>@graph</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="heading_predicates-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="heading_predicates-instance_method">
  
    - (<tt>Array&lt;URI&gt;</tt>) <strong>heading_predicates</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Defines order of predicates to use in heading.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Array&lt;URI&gt;</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 76</span>

<span class='def def kw'>def</span> <span class='heading_predicates identifier id'>heading_predicates</span>
  <span class='@heading_predicates ivar id'>@heading_predicates</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="predicate_order-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="predicate_order-instance_method">
  
    - (<tt>Array&lt;URI&gt;</tt>) <strong>predicate_order</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Defines order of predicates to to emit at begninning of a resource description. Defaults to
[rdf:type, rdfs:label, dc:title]</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Array&lt;URI&gt;</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 72</span>

<span class='def def kw'>def</span> <span class='predicate_order identifier id'>predicate_order</span>
  <span class='@predicate_order ivar id'>@predicate_order</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="top_classes-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="top_classes-instance_method">
  
    - (<tt>Array&lt;URI&gt;</tt>) <strong>top_classes</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Defines rdf:type of subjects to be emitted at the beginning of the document.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Array&lt;URI&gt;</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 67</span>

<span class='def def kw'>def</span> <span class='top_classes identifier id'>top_classes</span>
  <span class='@top_classes ivar id'>@top_classes</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="get_content-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt><sup>?</sup>) <strong>get_content</strong>(literal)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Haml rendering helper. Data to be added to a @content value</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Literal.html" title="RDF::Literal (class)">RDF::Literal</a></span></tt>)</span>
      
      
        <span class='name'>literal</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt>RDF::WriterError</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


663
664
665
666
667
668
669</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 663</span>

<span class='def def kw'>def</span> <span class='get_content identifier id'>get_content</span><span class='lparen token'>(</span><span class='literal identifier id'>literal</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='WriterError constant id'>WriterError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Getting content for #{literal.inspect}, which must be a literal&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='literal identifier id'>literal</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Literal constant id'>Literal</span><span class='rparen token'>)</span>
  <span class='case case kw'>case</span> <span class='literal identifier id'>literal</span>
  <span class='when when kw'>when</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Literal constant id'>Literal</span><span class='colon2 op'>::</span><span class='Date constant id'>Date</span><span class='comma token'>,</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Literal constant id'>Literal</span><span class='colon2 op'>::</span><span class='Time constant id'>Time</span><span class='comma token'>,</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Literal constant id'>Literal</span><span class='colon2 op'>::</span><span class='DateTime constant id'>DateTime</span>
    <span class='literal identifier id'>literal</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_curie-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>) <strong>get_curie</strong>(resource)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Haml rendering helper. Return appropriate, term, CURIE or URI for the given resource.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>RDF::Value</tt>)</span>
      
      
        <span class='name'>resource</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>value to use to identify URI</p></div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt>RDF::WriterError</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746
747
748
749
750</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 705</span>

<span class='def def kw'>def</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='resource identifier id'>resource</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='WriterError constant id'>WriterError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Getting CURIE for #{resource.inspect}, which must be an RDF value&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Value constant id'>Value</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='unless unless_mod kw'>unless</span> <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='uri? fid id'>uri?</span>

  <span class='@rdfcore_prefixes ivar id'>@rdfcore_prefixes</span> <span class='opasgn op'>||=</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='RDFa constant id'>RDFa</span><span class='colon2 op'>::</span><span class='Profile constant id'>Profile</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='URI constant id'>URI</span><span class='lparen token'>(</span><span class='string val'>&quot;http://www.w3.org/profile/rdfa-1.1&quot;</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='prefixes identifier id'>prefixes</span>
  
  <span class='uri identifier id'>uri</span> <span class='assign token'>=</span> <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>

  <span class='curie identifier id'>curie</span> <span class='assign token'>=</span> <span class='case case kw'>case</span>
  <span class='when when kw'>when</span> <span class='@uri_to_term_or_curie ivar id'>@uri_to_term_or_curie</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='uri identifier id'>uri</span><span class='rparen token'>)</span>
    <span class='comment val'>#add_debug(&quot;get_curie(#{uri}): uri_to_term_or_curie&quot;)</span>
    <span class='return return kw'>return</span> <span class='@uri_to_term_or_curie ivar id'>@uri_to_term_or_curie</span><span class='lbrack token'>[</span><span class='uri identifier id'>uri</span><span class='rbrack token'>]</span>
  <span class='when when kw'>when</span> <span class='@base_uri ivar id'>@base_uri</span> <span class='andop op'>&amp;&amp;</span> <span class='uri identifier id'>uri</span><span class='dot token'>.</span><span class='index identifier id'>index</span><span class='lparen token'>(</span><span class='@base_uri ivar id'>@base_uri</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
    <span class='comment val'>#add_debug(&quot;get_curie(#{uri}): base_uri (#{uri.sub(@base_uri.to_s, &quot;&quot;)})&quot;)</span>
    <span class='uri identifier id'>uri</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='@base_uri ivar id'>@base_uri</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='@vocabulary ivar id'>@vocabulary</span> <span class='andop op'>&amp;&amp;</span> <span class='uri identifier id'>uri</span><span class='dot token'>.</span><span class='index identifier id'>index</span><span class='lparen token'>(</span><span class='@vocabulary ivar id'>@vocabulary</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='integer val'>0</span>
    <span class='comment val'>#add_debug(&quot;get_curie(#{uri}): vocabulary&quot;)</span>
    <span class='uri identifier id'>uri</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='@vocabulary ivar id'>@vocabulary</span><span class='comma token'>,</span> <span class='string val'>&quot;&quot;</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='u identifier id'>u</span> <span class='assign token'>=</span> <span class='@uri_to_prefix ivar id'>@uri_to_prefix</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='detect identifier id'>detect</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='u identifier id'>u</span><span class='bitor op'>|</span> <span class='uri identifier id'>uri</span><span class='dot token'>.</span><span class='index identifier id'>index</span><span class='lparen token'>(</span><span class='u identifier id'>u</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='integer val'>0</span><span class='rbrace token'>}</span>
    <span class='comment val'>#add_debug(&quot;get_curie(#{uri}): uri_to_prefix&quot;)</span>
    <span class='comment val'># Use a defined prefix</span>
    <span class='prefix identifier id'>prefix</span> <span class='assign token'>=</span> <span class='@uri_to_prefix ivar id'>@uri_to_prefix</span><span class='lbrack token'>[</span><span class='u identifier id'>u</span><span class='rbrack token'>]</span>
    <span class='prefix identifier id'>prefix</span><span class='lparen token'>(</span><span class='prefix identifier id'>prefix</span><span class='comma token'>,</span> <span class='u identifier id'>u</span><span class='rparen token'>)</span>  <span class='comment val'># Define for output</span>
    <span class='uri identifier id'>uri</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='u identifier id'>u</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{prefix}:&quot;</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='u identifier id'>u</span> <span class='assign token'>=</span> <span class='@rdfcore_prefixes ivar id'>@rdfcore_prefixes</span><span class='dot token'>.</span><span class='values identifier id'>values</span><span class='dot token'>.</span><span class='detect identifier id'>detect</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='u identifier id'>u</span><span class='bitor op'>|</span> <span class='uri identifier id'>uri</span><span class='dot token'>.</span><span class='index identifier id'>index</span><span class='lparen token'>(</span><span class='u identifier id'>u</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='integer val'>0</span><span class='rbrace token'>}</span>
    <span class='comment val'>#add_debug(&quot;get_curie(#{uri}): rdfcore_prefixes&quot;)</span>
    <span class='comment val'># Use standard profile prefixes</span>
    <span class='pfx identifier id'>pfx</span> <span class='assign token'>=</span> <span class='@rdfcore_prefixes ivar id'>@rdfcore_prefixes</span><span class='dot token'>.</span><span class='invert identifier id'>invert</span><span class='lbrack token'>[</span><span class='u identifier id'>u</span><span class='rbrack token'>]</span>
    <span class='prefix identifier id'>prefix</span><span class='lparen token'>(</span><span class='pfx identifier id'>pfx</span><span class='comma token'>,</span> <span class='u identifier id'>u</span><span class='rparen token'>)</span>  <span class='comment val'># Define for output</span>
    <span class='uri identifier id'>uri</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='u identifier id'>u</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{pfx}:&quot;</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:standard_prefixes</span><span class='rbrack token'>]</span> <span class='andop op'>&amp;&amp;</span> <span class='vocab identifier id'>vocab</span> <span class='assign token'>=</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Vocabulary constant id'>Vocabulary</span><span class='dot token'>.</span><span class='detect identifier id'>detect</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='uri identifier id'>uri</span><span class='dot token'>.</span><span class='index identifier id'>index</span><span class='lparen token'>(</span><span class='v identifier id'>v</span><span class='dot token'>.</span><span class='to_uri identifier id'>to_uri</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='integer val'>0</span><span class='rbrace token'>}</span>
    <span class='comment val'>#add_debug(&quot;get_curie(#{uri}): standard_prefixes&quot;)</span>
    <span class='prefix identifier id'>prefix</span> <span class='assign token'>=</span> <span class='vocab identifier id'>vocab</span><span class='dot token'>.</span><span class='__name__ identifier id'>__name__</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>'::'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='dot token'>.</span><span class='downcase identifier id'>downcase</span>
    <span class='prefix identifier id'>prefix</span><span class='lparen token'>(</span><span class='prefix identifier id'>prefix</span><span class='comma token'>,</span> <span class='vocab identifier id'>vocab</span><span class='dot token'>.</span><span class='to_uri identifier id'>to_uri</span><span class='rparen token'>)</span> <span class='comment val'># Define for output</span>
    <span class='uri identifier id'>uri</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='vocab identifier id'>vocab</span><span class='dot token'>.</span><span class='to_uri identifier id'>to_uri</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{prefix}:&quot;</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='comment val'>#add_debug(&quot;get_curie(#{uri}): none&quot;)</span>
    <span class='uri identifier id'>uri</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'>#add_debug(&quot;get_curie(#{resource}) =&gt; #{curie}&quot;)</span>

  <span class='@uri_to_term_or_curie ivar id'>@uri_to_term_or_curie</span><span class='lbrack token'>[</span><span class='uri identifier id'>uri</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='curie identifier id'>curie</span>
<span class='rescue rescue kw'>rescue</span> <span class='Addressable constant id'>Addressable</span><span class='colon2 op'>::</span><span class='URI constant id'>URI</span><span class='colon2 op'>::</span><span class='InvalidURIError constant id'>InvalidURIError</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
  <span class='raise identifier id'>raise</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='WriterError constant id'>WriterError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Invalid URI #{uri.inspect}: #{e.message}&quot;</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_dt_curie-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt><sup>?</sup>) <strong>get_dt_curie</strong>(literal)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Haml rendering helper. Return CURIE for the literal datatype, if the literal is a typed literal.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
        <span class='name'>resource</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt>RDF::WriterError</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


643
644
645
646</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 643</span>

<span class='def def kw'>def</span> <span class='get_dt_curie identifier id'>get_dt_curie</span><span class='lparen token'>(</span><span class='literal identifier id'>literal</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='WriterError constant id'>WriterError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Getting datatype CURIE for #{literal.inspect}, which must be a literal&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='literal identifier id'>literal</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Literal constant id'>Literal</span><span class='rparen token'>)</span>
  <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='literal identifier id'>literal</span><span class='dot token'>.</span><span class='datatype identifier id'>datatype</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='literal identifier id'>literal</span><span class='dot token'>.</span><span class='literal? fid id'>literal?</span> <span class='andop op'>&amp;&amp;</span> <span class='literal identifier id'>literal</span><span class='dot token'>.</span><span class='datatype? fid id'>datatype?</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_lang-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt><sup>?</sup>) <strong>get_lang</strong>(literal)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Haml rendering helper. Return language for plain literal, if there is no language, or it is the same as the document, return nil</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Literal.html" title="RDF::Literal (class)">RDF::Literal</a></span></tt>)</span>
      
      
        <span class='name'>literal</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt>RDF::WriterError</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


653
654
655
656</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 653</span>

<span class='def def kw'>def</span> <span class='get_lang identifier id'>get_lang</span><span class='lparen token'>(</span><span class='literal identifier id'>literal</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='WriterError constant id'>WriterError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Getting datatype CURIE for #{literal.inspect}, which must be a literal&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='literal identifier id'>literal</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Literal constant id'>Literal</span><span class='rparen token'>)</span>
  <span class='literal identifier id'>literal</span><span class='dot token'>.</span><span class='language identifier id'>language</span> <span class='if if_mod kw'>if</span> <span class='literal identifier id'>literal</span><span class='dot token'>.</span><span class='literal? fid id'>literal?</span> <span class='andop op'>&amp;&amp;</span> <span class='literal identifier id'>literal</span><span class='dot token'>.</span><span class='language identifier id'>language</span> <span class='andop op'>&amp;&amp;</span> <span class='literal identifier id'>literal</span><span class='dot token'>.</span><span class='language identifier id'>language</span> <span class='neq op'>!=</span> <span class='@lang ivar id'>@lang</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_predicate_name-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>) <strong>get_predicate_name</strong>(resource)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Haml rendering helper. Return an appropriate label for a resource.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
        <span class='name'>resource</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt>RDF::WriterError</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


695
696
697
698</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 695</span>

<span class='def def kw'>def</span> <span class='get_predicate_name identifier id'>get_predicate_name</span><span class='lparen token'>(</span><span class='resource identifier id'>resource</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='WriterError constant id'>WriterError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Getting predicate name for #{resource.inspect}, which must be a resource&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='resource identifier id'>resource</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Resource constant id'>Resource</span><span class='rparen token'>)</span>
  <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='resource identifier id'>resource</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_value-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>) <strong>get_value</strong>(literal)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Haml rendering helper. Display value for object, may be non-canonical if get_content returns a non-nil value</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Literal.html" title="RDF::Literal (class)">RDF::Literal</a></span></tt>)</span>
      
      
        <span class='name'>literal</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt>RDF::WriterError</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


676
677
678
679
680
681
682
683
684
685
686
687
688</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 676</span>

<span class='def def kw'>def</span> <span class='get_value identifier id'>get_value</span><span class='lparen token'>(</span><span class='literal identifier id'>literal</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='WriterError constant id'>WriterError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Getting value for #{literal.inspect}, which must be a literal&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='literal identifier id'>literal</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Literal constant id'>Literal</span><span class='rparen token'>)</span>
  <span class='case case kw'>case</span> <span class='literal identifier id'>literal</span>
  <span class='when when kw'>when</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Literal constant id'>Literal</span><span class='colon2 op'>::</span><span class='Date constant id'>Date</span>
    <span class='literal identifier id'>literal</span><span class='dot token'>.</span><span class='object identifier id'>object</span><span class='dot token'>.</span><span class='strftime identifier id'>strftime</span><span class='lparen token'>(</span><span class='string val'>&quot;%A, %d %B %Y&quot;</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Literal constant id'>Literal</span><span class='colon2 op'>::</span><span class='Time constant id'>Time</span>
    <span class='literal identifier id'>literal</span><span class='dot token'>.</span><span class='object identifier id'>object</span><span class='dot token'>.</span><span class='strftime identifier id'>strftime</span><span class='lparen token'>(</span><span class='string val'>&quot;%H:%M:%S %Z&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/\+00:00/</span><span class='comma token'>,</span> <span class='string val'>&quot;UTC&quot;</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Literal constant id'>Literal</span><span class='colon2 op'>::</span><span class='DateTime constant id'>DateTime</span>
    <span class='literal identifier id'>literal</span><span class='dot token'>.</span><span class='object identifier id'>object</span><span class='dot token'>.</span><span class='strftime identifier id'>strftime</span><span class='lparen token'>(</span><span class='string val'>&quot;%H:%M:%S %Z on %A, %d %B %Y&quot;</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='sub identifier id'>sub</span><span class='lparen token'>(</span><span class='regexp val'>/\+00:00/</span><span class='comma token'>,</span> <span class='string val'>&quot;UTC&quot;</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='literal identifier id'>literal</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="haml_template-instance_method">
  
    - (<tt>Hash&lt;Symbol =&gt; <span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>) <strong>haml_template</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Hash&lt;Symbol =&gt; <span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


138
139
140
141
142
143
144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 138</span>

<span class='def def kw'>def</span> <span class='haml_template identifier id'>haml_template</span>
  <span class='case case kw'>case</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:haml</span><span class='rbrack token'>]</span>
  <span class='when when kw'>when</span> <span class='Symbol constant id'>Symbol</span><span class='comma token'>,</span> <span class='String constant id'>String</span>   <span class='then then kw'>then</span> <span class='HAML_TEMPLATES constant id'>HAML_TEMPLATES</span><span class='dot token'>.</span><span class='fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:haml</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span><span class='comma token'>,</span> <span class='DEFAULT_HAML constant id'>DEFAULT_HAML</span><span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='Hash constant id'>Hash</span>             <span class='then then kw'>then</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:haml</span><span class='rbrack token'>]</span>
  <span class='else else kw'>else</span>                       <span class='DEFAULT_HAML constant id'>DEFAULT_HAML</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="order_properties-instance_method">
  
    - (<tt>Array&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>) <strong>order_properties</strong>(properties)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Take a hash from predicate uris to lists of values.
Sort the lists of values.  Return a sorted list of properties.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span> =&gt; Array&lt;Resource&gt;}</tt>)</span>
      
      
        <span class='name'>properties</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash of Property to Resource mappings</p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>] Ordered list of properties. Uses predicate_order.</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 506</span>

<span class='def def kw'>def</span> <span class='order_properties identifier id'>order_properties</span><span class='lparen token'>(</span><span class='properties identifier id'>properties</span><span class='rparen token'>)</span>
  <span class='properties identifier id'>properties</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='bitor op'>|</span>
    <span class='properties identifier id'>properties</span><span class='lbrack token'>[</span><span class='k identifier id'>k</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='properties identifier id'>properties</span><span class='lbrack token'>[</span><span class='k identifier id'>k</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='sort identifier id'>sort</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='comma token'>,</span> <span class='b identifier id'>b</span><span class='bitor op'>|</span>
      <span class='a_li identifier id'>a_li</span> <span class='assign token'>=</span> <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='URI constant id'>URI</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='a identifier id'>a</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='a identifier id'>a</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='match op'>=~</span> <span class='regexp val'>/:_\d+$/</span> <span class='question op'>?</span> <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span> <span class='colon op'>:</span> <span class='a identifier id'>a</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
      <span class='b_li identifier id'>b_li</span> <span class='assign token'>=</span> <span class='b identifier id'>b</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='URI constant id'>URI</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='b identifier id'>b</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='b identifier id'>b</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='match op'>=~</span> <span class='regexp val'>/:_\d+$/</span> <span class='question op'>?</span> <span class='b identifier id'>b</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span> <span class='colon op'>:</span> <span class='b identifier id'>b</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
      
      <span class='a_li identifier id'>a_li</span> <span class='cmp op'>&lt;=&gt;</span> <span class='b_li identifier id'>b_li</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'># Make sorted list of properties</span>
  <span class='prop_list identifier id'>prop_list</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  
  <span class='predicate_order identifier id'>predicate_order</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='prop identifier id'>prop</span><span class='bitor op'>|</span>
    <span class='next next kw'>next</span> <span class='unless unless_mod kw'>unless</span> <span class='properties identifier id'>properties</span><span class='lbrack token'>[</span><span class='prop identifier id'>prop</span><span class='rbrack token'>]</span>
    <span class='prop_list identifier id'>prop_list</span> <span class='lshft op'>&lt;&lt;</span> <span class='prop identifier id'>prop</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='end end kw'>end</span>
  
  <span class='properties identifier id'>properties</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='sort identifier id'>sort</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='prop identifier id'>prop</span><span class='bitor op'>|</span>
    <span class='prop identifier id'>prop</span> <span class='assign token'>=</span> <span class='prop identifier id'>prop</span> <span class='match op'>=~</span> <span class='regexp val'>/^_:(.*)$/</span> <span class='question op'>?</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Node constant id'>Node</span><span class='dot token'>.</span><span class='intern identifier id'>intern</span><span class='lparen token'>(</span><span class='$1 nth_ref id'>$1</span><span class='rparen token'>)</span> <span class='colon op'>:</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='URI constant id'>URI</span><span class='dot token'>.</span><span class='intern identifier id'>intern</span><span class='lparen token'>(</span><span class='prop identifier id'>prop</span><span class='rparen token'>)</span>
    <span class='next next kw'>next</span> <span class='if if_mod kw'>if</span> <span class='prop_list identifier id'>prop_list</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='prop identifier id'>prop</span><span class='rparen token'>)</span>
    <span class='prop_list identifier id'>prop_list</span> <span class='lshft op'>&lt;&lt;</span> <span class='prop identifier id'>prop</span>
  <span class='end end kw'>end</span>
  
  <span class='add_debug identifier id'>add_debug</span> <span class='dstring node'>&quot;order_properties: #{prop_list.inspect}&quot;</span>
  <span class='prop_list identifier id'>prop_list</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="order_subjects-instance_method">
  
    - (<tt>Array&lt;Resource&gt;</tt>) <strong>order_subjects</strong>  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Order subjects for output. Override this to output subjects in another order.</p>

<p>Uses #top<em>classes and #base</em>uri.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Array&lt;Resource&gt;</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>Ordered list of subjects</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 471</span>

<span class='def def kw'>def</span> <span class='order_subjects identifier id'>order_subjects</span>
  <span class='seen identifier id'>seen</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='subjects identifier id'>subjects</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  
  <span class='comment val'># Start with base_uri</span>
  <span class='if if kw'>if</span> <span class='base_uri identifier id'>base_uri</span> <span class='andop op'>&amp;&amp;</span> <span class='@subjects ivar id'>@subjects</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='base_uri identifier id'>base_uri</span><span class='rparen token'>)</span>
    <span class='subjects identifier id'>subjects</span> <span class='lshft op'>&lt;&lt;</span> <span class='base_uri identifier id'>base_uri</span>
    <span class='seen identifier id'>seen</span><span class='lbrack token'>[</span><span class='base_uri identifier id'>base_uri</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'># Add distinguished classes</span>
  <span class='top_classes identifier id'>top_classes</span><span class='dot token'>.</span>
  <span class='select identifier id'>select</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='s identifier id'>s</span><span class='bitor op'>|</span> <span class='notop op'>!</span><span class='seen identifier id'>seen</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='dot token'>.</span>
    <span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='class_uri identifier id'>class_uri</span><span class='bitor op'>|</span>
    <span class='graph identifier id'>graph</span><span class='dot token'>.</span><span class='query identifier id'>query</span><span class='lparen token'>(</span><span class='symbol val'>:predicate</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='RDF constant id'>RDF</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='comma token'>,</span> <span class='symbol val'>:object</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='class_uri identifier id'>class_uri</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='st identifier id'>st</span><span class='bitor op'>|</span> <span class='st identifier id'>st</span><span class='dot token'>.</span><span class='subject identifier id'>subject</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='sort identifier id'>sort</span><span class='dot token'>.</span><span class='uniq identifier id'>uniq</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='subject identifier id'>subject</span><span class='bitor op'>|</span>
      <span class='comment val'>#add_debug &quot;order_subjects: #{subject.inspect}&quot;</span>
      <span class='subjects identifier id'>subjects</span> <span class='lshft op'>&lt;&lt;</span> <span class='subject identifier id'>subject</span>
      <span class='seen identifier id'>seen</span><span class='lbrack token'>[</span><span class='subject identifier id'>subject</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'># Sort subjects by resources over nodes, ref_counts and the subject URI itself</span>
  <span class='recursable identifier id'>recursable</span> <span class='assign token'>=</span> <span class='@subjects ivar id'>@subjects</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span>
    <span class='select identifier id'>select</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='s identifier id'>s</span><span class='bitor op'>|</span> <span class='notop op'>!</span><span class='seen identifier id'>seen</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='dot token'>.</span>
    <span class='map identifier id'>map</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='r identifier id'>r</span><span class='bitor op'>|</span> <span class='lbrack token'>[</span><span class='r identifier id'>r</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='Node constant id'>Node</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='integer val'>1</span> <span class='colon op'>:</span> <span class='integer val'>0</span><span class='comma token'>,</span> <span class='ref_count identifier id'>ref_count</span><span class='lparen token'>(</span><span class='r identifier id'>r</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='r identifier id'>r</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span><span class='dot token'>.</span>
    <span class='sort identifier id'>sort</span>
  
  <span class='subjects identifier id'>subjects</span> <span class='opasgn op'>+=</span> <span class='recursable identifier id'>recursable</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='r identifier id'>r</span><span class='bitor op'>|</span> <span class='r identifier id'>r</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="predicate-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>) <strong>predicate</strong>(predicate, objects)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Write a predicate with one or more values.</p>

<p>Values may be a combination of Literal and Resource (Node or URI).</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
        <span class='name'>predicate</span>
      
      
      
        &mdash;
        <div class='inline'><p>Predicate to serialize</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Array&lt;RDF::Resource&gt;</tt>)</span>
      
      
        <span class='name'>objects</span>
      
      
      
        &mdash;
        <div class='inline'><p>Objects to serialize</p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


623
624
625
626
627
628
629
630
631
632
633
634
635
636</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 623</span>

<span class='def def kw'>def</span> <span class='predicate identifier id'>predicate</span><span class='lparen token'>(</span><span class='predicate identifier id'>predicate</span><span class='comma token'>,</span> <span class='objects identifier id'>objects</span><span class='rparen token'>)</span>
  <span class='add_debug identifier id'>add_debug</span> <span class='dstring node'>&quot;predicate: #{predicate.inspect}, objects: #{objects}&quot;</span>
  
  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='objects identifier id'>objects</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  
  <span class='add_debug identifier id'>add_debug</span><span class='lparen token'>(</span><span class='dstring node'>&quot;predicate: #{get_curie(predicate)}&quot;</span><span class='rparen token'>)</span>
  <span class='property identifier id'>property</span> <span class='assign token'>=</span> <span class='predicate identifier id'>predicate</span> <span class='if if_mod kw'>if</span> <span class='objects identifier id'>objects</span><span class='dot token'>.</span><span class='any? fid id'>any?</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:literal?</span><span class='rparen token'>)</span>
  <span class='rel identifier id'>rel</span>      <span class='assign token'>=</span> <span class='predicate identifier id'>predicate</span> <span class='if if_mod kw'>if</span> <span class='objects identifier id'>objects</span><span class='dot token'>.</span><span class='any? fid id'>any?</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:uri?</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='objects identifier id'>objects</span><span class='dot token'>.</span><span class='any? fid id'>any?</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:node?</span><span class='rparen token'>)</span>
  <span class='render_property identifier id'>render_property</span><span class='lparen token'>(</span><span class='predicate identifier id'>predicate</span><span class='comma token'>,</span> <span class='objects identifier id'>objects</span><span class='comma token'>,</span> <span class='property identifier id'>property</span><span class='comma token'>,</span> <span class='rel identifier id'>rel</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='o identifier id'>o</span><span class='bitor op'>|</span>
    <span class='comment val'># Yields each object, for potential recursive definition.</span>
    <span class='comment val'># If nil is returned, a leaf is produced</span>
    <span class='depth identifier id'>depth</span> <span class='lbrace token'>{</span><span class='subject identifier id'>subject</span><span class='lparen token'>(</span><span class='o identifier id'>o</span><span class='comma token'>,</span> <span class='symbol val'>:rel</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rel identifier id'>rel</span><span class='comma token'>,</span> <span class='symbol val'>:element</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lparen token'>(</span><span class='symbol val'>:li</span> <span class='if if_mod kw'>if</span> <span class='objects identifier id'>objects</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='gt op'>&gt;</span> <span class='integer val'>1</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='rbrace token'>}</span> <span class='if if_mod kw'>if</span> <span class='notop op'>!</span><span class='is_done? fid id'>is_done?</span><span class='lparen token'>(</span><span class='o identifier id'>o</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='@subjects ivar id'>@subjects</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='o identifier id'>o</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="preprocess-instance_method">
  
    - (<tt>ignored</tt>) <strong>preprocess</strong>  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Perform any preprocessing of statements required</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>ignored</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 440</span>

<span class='def def kw'>def</span> <span class='preprocess identifier id'>preprocess</span>
  <span class='comment val'># Load profiles</span>
  <span class='comment val'># Add terms and prefixes to local store for converting URIs</span>
  <span class='comment val'># Keep track of vocabulary from left-most profile</span>
  <span class='lbrack token'>[</span><span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:profiles</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='compact identifier id'>compact</span><span class='dot token'>.</span><span class='reverse identifier id'>reverse</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='uri identifier id'>uri</span><span class='bitor op'>|</span>
    <span class='prof identifier id'>prof</span> <span class='assign token'>=</span> <span class='Profile constant id'>Profile</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='uri identifier id'>uri</span><span class='rparen token'>)</span>
    <span class='prof identifier id'>prof</span><span class='dot token'>.</span><span class='prefixes identifier id'>prefixes</span><span class='dot token'>.</span><span class='each_pair identifier id'>each_pair</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='bitor op'>|</span>
      <span class='@uri_to_prefix ivar id'>@uri_to_prefix</span><span class='lbrack token'>[</span><span class='v identifier id'>v</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='k identifier id'>k</span>
    <span class='end end kw'>end</span>
    
    <span class='prof identifier id'>prof</span><span class='dot token'>.</span><span class='terms identifier id'>terms</span><span class='dot token'>.</span><span class='each_pair identifier id'>each_pair</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='bitor op'>|</span>
      <span class='@uri_to_term_or_curie ivar id'>@uri_to_term_or_curie</span><span class='lbrack token'>[</span><span class='v identifier id'>v</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='URI constant id'>URI</span><span class='dot token'>.</span><span class='intern identifier id'>intern</span><span class='lparen token'>(</span><span class='k identifier id'>k</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    
    <span class='@vocabulary ivar id'>@vocabulary</span> <span class='assign token'>=</span> <span class='prof identifier id'>prof</span><span class='dot token'>.</span><span class='vocabulary identifier id'>vocabulary</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='end end kw'>end</span>
  
  <span class='comment val'># Load defined prefixes</span>
  <span class='lparen token'>(</span><span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:prefixes</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each_pair identifier id'>each_pair</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='v identifier id'>v</span><span class='bitor op'>|</span>
    <span class='@uri_to_prefix ivar id'>@uri_to_prefix</span><span class='lbrack token'>[</span><span class='v identifier id'>v</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='k identifier id'>k</span>
  <span class='end end kw'>end</span>
  <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:prefixes</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>  <span class='comment val'># Will define actual used when matched</span>
  
  <span class='comment val'># Process each statement to establish CURIEs and Terms</span>
  <span class='@graph ivar id'>@graph</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='statement identifier id'>statement</span><span class='bitor op'>|</span> <span class='preprocess_statement identifier id'>preprocess_statement</span><span class='lparen token'>(</span><span class='statement identifier id'>statement</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="preprocess_statement-instance_method">
  
    - (<tt>ignored</tt>) <strong>preprocess_statement</strong>(statement)  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Perform any statement preprocessing required. This is used to perform reference counts and determine required
prefixes.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>RDF::Statement</tt>)</span>
      
      
        <span class='name'>statement</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>ignored</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


538
539
540
541
542
543
544
545
546
547</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 538</span>

<span class='def def kw'>def</span> <span class='preprocess_statement identifier id'>preprocess_statement</span><span class='lparen token'>(</span><span class='statement identifier id'>statement</span><span class='rparen token'>)</span>
  <span class='comment val'>#add_debug &quot;preprocess: #{statement.inspect}&quot;</span>
  <span class='references identifier id'>references</span> <span class='assign token'>=</span> <span class='ref_count identifier id'>ref_count</span><span class='lparen token'>(</span><span class='statement identifier id'>statement</span><span class='dot token'>.</span><span class='object identifier id'>object</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='integer val'>1</span>
  <span class='@references ivar id'>@references</span><span class='lbrack token'>[</span><span class='statement identifier id'>statement</span><span class='dot token'>.</span><span class='object identifier id'>object</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='references identifier id'>references</span>
  <span class='@subjects ivar id'>@subjects</span><span class='lbrack token'>[</span><span class='statement identifier id'>statement</span><span class='dot token'>.</span><span class='subject identifier id'>subject</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='statement identifier id'>statement</span><span class='dot token'>.</span><span class='subject identifier id'>subject</span><span class='rparen token'>)</span>
  <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='statement identifier id'>statement</span><span class='dot token'>.</span><span class='predicate identifier id'>predicate</span><span class='rparen token'>)</span>
  <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='statement identifier id'>statement</span><span class='dot token'>.</span><span class='object identifier id'>object</span><span class='rparen token'>)</span>
  <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='statement identifier id'>statement</span><span class='dot token'>.</span><span class='object identifier id'>object</span><span class='dot token'>.</span><span class='datatype identifier id'>datatype</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='statement identifier id'>statement</span><span class='dot token'>.</span><span class='object identifier id'>object</span><span class='dot token'>.</span><span class='literal? fid id'>literal?</span> <span class='andop op'>&amp;&amp;</span> <span class='statement identifier id'>statement</span><span class='dot token'>.</span><span class='object identifier id'>object</span><span class='dot token'>.</span><span class='has_datatype? fid id'>has_datatype?</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="profile_repository-instance_method">
  
    - (<tt>RDF::Repository</tt>) <strong>profile_repository</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>RDF::Repository</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147
148
149</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 147</span>

<span class='def def kw'>def</span> <span class='profile_repository identifier id'>profile_repository</span>
  <span class='Profile constant id'>Profile</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="profile_repository=-instance_method">
  
    - (<tt>RDF::Repository</tt>) <strong>profile_repository=</strong>(repo) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>RDF::Repository</tt>)</span>
      
      
        <span class='name'>repo</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>RDF::Repository</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 153</span>

<span class='def def kw'>def</span> <span class='profile_repository= identifier id'>profile_repository=</span><span class='lparen token'>(</span><span class='repo identifier id'>repo</span><span class='rparen token'>)</span>
  <span class='Profile constant id'>Profile</span><span class='dot token'>.</span><span class='repository identifier id'>repository</span> <span class='assign token'>=</span> <span class='repo identifier id'>repo</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="render_document-instance_method">
  
    - (<tt>Object</tt>) <strong>render_document</strong>(subjects, options = {}) {|subject| ... } <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Render document using haml_template[:doc].
Yields each subject to be rendered separately.</p>

<p>The default Haml template is:</p>

<pre class="code"><span class='notop op'>!</span><span class='notop op'>!</span><span class='notop op'>!</span> <span class='XML constant id'>XML</span>
<span class='notop op'>!</span><span class='notop op'>!</span><span class='notop op'>!</span> <span class='integer val'>5</span>
<span class='html identifier id'>html</span><span class='lbrace token'>{</span><span class='symbol val'>:xmlns</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;http://www.w3.org/1999/xhtml&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:lang</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lang identifier id'>lang</span><span class='comma token'>,</span> <span class='symbol val'>:profile</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='profile identifier id'>profile</span><span class='comma token'>,</span> <span class='symbol val'>:prefix</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='prefix identifier id'>prefix</span><span class='rbrace token'>}</span>
  <span class='minus op'>-</span> <span class='if if kw'>if</span> <span class='base identifier id'>base</span> <span class='orop op'>||</span> <span class='title identifier id'>title</span>
    <span class='head identifier id'>head</span>
      <span class='minus op'>-</span> <span class='if if kw'>if</span> <span class='base identifier id'>base</span>
        <span class='base identifier id'>base</span><span class='lbrace token'>{</span><span class='symbol val'>:href</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='base identifier id'>base</span><span class='rbrace token'>}</span>
      <span class='minus op'>-</span> <span class='if if kw'>if</span> <span class='title identifier id'>title</span>
        <span class='title identifier id'>title</span><span class='assign token'>=</span> <span class='title identifier id'>title</span>
  <span class='body identifier id'>body</span>
    <span class='minus op'>-</span> <span class='subjects identifier id'>subjects</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='subject identifier id'>subject</span><span class='bitor op'>|</span>
      <span class='neq op'>!=</span> <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='rparen token'>)</span>
</pre>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Array&lt;RDF::Resource&gt;</tt>)</span>
      
      
        <span class='name'>subjects</span>
      
      
      
        &mdash;
        <div class='inline'><p>Ordered list of subjects. Template must yield to each subject, which returns
the serialization of that subject (@see subject_template)</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Hash{Symbol =&gt; Object}</tt>)</span>
      
      
        <span class='name'>options</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Rendering options passed to Haml render.</p></div>
      
    </li>
  
</ul>

  
    
    
    
    
    <h3>Options Hash (<tt>options</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>RDF::URI</tt>)</span>
          <span class="name">base</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Base URI added to document, used for shortening URIs within the document.</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>Symbol</tt>, <tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="name">language</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Value of @lang attribute in document, also allows included literals to omit
an @lang attribute if it is equivalent to that of the document.</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="name">title</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Value of html>head>title element.</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="name">profile</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Value of @profile attribute.</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="name">prefix</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Value of @prefix attribute.</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="name">haml</span>
          <span class="default">
            
              &mdash; default:
              <tt>haml_template[:doc]</tt>
            
          </span>
          &mdash; <div class='inline'><p>Haml template to render.</p></div>
        </tr>
      
    </ul>
  
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
        <span class='type'>(<tt>subject</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>Yields each subject</p></div>
      
    </li>
  
</ul>
<h3>Yield Parameters:</h3>
<ul class="yieldparam">
  
    <li>
      
        <span class='type'>(<tt>RDF::URI</tt>)</span>
      
      
        <span class='name'>subject</span>
      
      
      
    </li>
  
</ul>
<h3>Yield Returns:</h3>
<ul class="yieldreturn">
  
    <li>
      
        <span class='type'>(<tt>:ignored</tt>)</span>
      
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'></span>
      
      
      
      
        
        <div class='inline'><p>String
The rendered document is returned as a string</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


274
275
276
277
278
279
280
281
282
283
284
285</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 274</span>

<span class='def def kw'>def</span> <span class='render_document identifier id'>render_document</span><span class='lparen token'>(</span><span class='subjects identifier id'>subjects</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='template identifier id'>template</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:haml</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='symbol val'>:doc</span>
  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span>
    <span class='symbol val'>:prefix</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span>
    <span class='symbol val'>:profile</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span>
    <span class='symbol val'>:subjects</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='subjects identifier id'>subjects</span><span class='comma token'>,</span>
    <span class='symbol val'>:title</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span>
  <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='hamlify identifier id'>hamlify</span><span class='lparen token'>(</span><span class='template identifier id'>template</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='subject identifier id'>subject</span><span class='bitor op'>|</span>
    <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="render_property-instance_method">
  
    - (<tt>Object</tt>) <strong>render_property</strong>(predicate, objects, property, rel, options = {}) {|object| ... } <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Render a single- or multi-valued predicate using haml<em>template[:property</em>value] or haml<em>template[:property</em>values].
Yields each object for optional rendering. The block should only
render for recursive subject definitions (i.e., where the object
is also a subject and is rendered underneath the first referencing subject).</p>

<p>The default Haml template for a single-valued property is:</p>

<pre class="code"><span class='minus op'>-</span> <span class='object identifier id'>object</span> <span class='assign token'>=</span> <span class='objects identifier id'>objects</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
<span class='minus op'>-</span> <span class='if if kw'>if</span> <span class='heading_predicates identifier id'>heading_predicates</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='predicate identifier id'>predicate</span><span class='rparen token'>)</span> <span class='andop op'>&amp;&amp;</span> <span class='object identifier id'>object</span><span class='dot token'>.</span><span class='literal? fid id'>literal?</span>
  <span class='h1 identifier id'>h1</span><span class='lbrace token'>{</span><span class='symbol val'>:property</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='predicate identifier id'>predicate</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:content</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_content identifier id'>get_content</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:lang</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_lang identifier id'>get_lang</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:datatype</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_dt_curie identifier id'>get_dt_curie</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='opasgn op'>&amp;=</span> <span class='get_value identifier id'>get_value</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span>
<span class='minus op'>-</span> <span class='else else kw'>else</span>
  <span class='div identifier id'>div</span><span class='dot token'>.</span><span class='property identifier id'>property</span>
    <span class='span identifier id'>span</span><span class='dot token'>.</span><span class='label identifier id'>label</span>
      <span class='assign token'>=</span> <span class='get_predicate_name identifier id'>get_predicate_name</span><span class='lparen token'>(</span><span class='predicate identifier id'>predicate</span><span class='rparen token'>)</span>
    <span class='minus op'>-</span> <span class='if if kw'>if</span> <span class='res identifier id'>res</span> <span class='assign token'>=</span> <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span>
      <span class='neq op'>!=</span> <span class='res identifier id'>res</span>
    <span class='minus op'>-</span> <span class='elsif elsif kw'>elsif</span> <span class='object identifier id'>object</span><span class='dot token'>.</span><span class='node? fid id'>node?</span>
      <span class='span identifier id'>span</span><span class='lbrace token'>{</span><span class='symbol val'>:resource</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:rel</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='predicate identifier id'>predicate</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='assign token'>=</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span>
    <span class='minus op'>-</span> <span class='elsif elsif kw'>elsif</span> <span class='object identifier id'>object</span><span class='dot token'>.</span><span class='uri? fid id'>uri?</span>
      <span class='a identifier id'>a</span><span class='lbrace token'>{</span><span class='symbol val'>:href</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='object identifier id'>object</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='comma token'>,</span> <span class='symbol val'>:rel</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='predicate identifier id'>predicate</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='assign token'>=</span> <span class='object identifier id'>object</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
    <span class='minus op'>-</span> <span class='elsif elsif kw'>elsif</span> <span class='object identifier id'>object</span><span class='dot token'>.</span><span class='datatype identifier id'>datatype</span> <span class='eq op'>==</span> <span class='RDF constant id'>RDF</span><span class='dot token'>.</span><span class='XMLLiteral constant id'>XMLLiteral</span>
      <span class='span identifier id'>span</span><span class='lbrace token'>{</span><span class='symbol val'>:property</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='predicate identifier id'>predicate</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:lang</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_lang identifier id'>get_lang</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:datatype</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_dt_curie identifier id'>get_dt_curie</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='lt op'>&lt;</span><span class='neq op'>!=</span> <span class='get_value identifier id'>get_value</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span>
    <span class='minus op'>-</span> <span class='else else kw'>else</span>
      <span class='span identifier id'>span</span><span class='lbrace token'>{</span><span class='symbol val'>:property</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='predicate identifier id'>predicate</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:content</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_content identifier id'>get_content</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:lang</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_lang identifier id'>get_lang</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:datatype</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_dt_curie identifier id'>get_dt_curie</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='opasgn op'>&amp;=</span> <span class='get_value identifier id'>get_value</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span>
</pre>

<p>The default Haml template for a multi-valued property is:
  %div.property</p>

<pre class="code"><span class='span identifier id'>span</span><span class='dot token'>.</span><span class='label identifier id'>label</span>
  <span class='assign token'>=</span> <span class='get_predicate_name identifier id'>get_predicate_name</span><span class='lparen token'>(</span><span class='predicate identifier id'>predicate</span><span class='rparen token'>)</span>
<span class='ul identifier id'>ul</span><span class='lbrace token'>{</span><span class='symbol val'>:rel</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lparen token'>(</span><span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='rel identifier id'>rel</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='rel identifier id'>rel</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:property</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lparen token'>(</span><span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='property identifier id'>property</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='property identifier id'>property</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
  <span class='minus op'>-</span> <span class='objects identifier id'>objects</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='object identifier id'>object</span><span class='bitor op'>|</span>
    <span class='minus op'>-</span> <span class='if if kw'>if</span> <span class='res identifier id'>res</span> <span class='assign token'>=</span> <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span>
      <span class='neq op'>!=</span> <span class='res identifier id'>res</span>
    <span class='minus op'>-</span> <span class='elsif elsif kw'>elsif</span> <span class='object identifier id'>object</span><span class='dot token'>.</span><span class='node? fid id'>node?</span>
      <span class='li identifier id'>li</span><span class='lbrace token'>{</span><span class='symbol val'>:resource</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='assign token'>=</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span>
    <span class='minus op'>-</span> <span class='elsif elsif kw'>elsif</span> <span class='object identifier id'>object</span><span class='dot token'>.</span><span class='uri? fid id'>uri?</span>
      <span class='li identifier id'>li</span>
        <span class='a identifier id'>a</span><span class='lbrace token'>{</span><span class='symbol val'>:href</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='object identifier id'>object</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrace token'>}</span><span class='assign token'>=</span> <span class='object identifier id'>object</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
    <span class='minus op'>-</span> <span class='elsif elsif kw'>elsif</span> <span class='object identifier id'>object</span><span class='dot token'>.</span><span class='datatype identifier id'>datatype</span> <span class='eq op'>==</span> <span class='RDF constant id'>RDF</span><span class='dot token'>.</span><span class='XMLLiteral constant id'>XMLLiteral</span>
      <span class='li identifier id'>li</span><span class='lbrace token'>{</span><span class='symbol val'>:lang</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_lang identifier id'>get_lang</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:datatype</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='dot token'>.</span><span class='datatype identifier id'>datatype</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='lt op'>&lt;</span><span class='neq op'>!=</span> <span class='get_value identifier id'>get_value</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span>
    <span class='minus op'>-</span> <span class='else else kw'>else</span>
      <span class='li identifier id'>li</span><span class='lbrace token'>{</span><span class='symbol val'>:content</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_content identifier id'>get_content</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:lang</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_lang identifier id'>get_lang</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:datatype</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_dt_curie identifier id'>get_dt_curie</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='opasgn op'>&amp;=</span> <span class='get_value identifier id'>get_value</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span>
</pre>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Array&lt;RDF::Resource&gt;</tt>)</span>
      
      
        <span class='name'>predicate</span>
      
      
      
        &mdash;
        <div class='inline'><p>Predicate to render.</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Array&lt;RDF::Resource&gt;</tt>)</span>
      
      
        <span class='name'>objects</span>
      
      
      
        &mdash;
        <div class='inline'><p>List of objects to render.
If the list contains only a single element, the :property<em>value template will be used.
Otherwise, the :property</em>values template is used.</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
        <span class='name'>property</span>
      
      
      
        &mdash;
        <div class='inline'><p>Value of @property, which should only be defined for literal objects</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
        <span class='name'>rel</span>
      
      
      
        &mdash;
        <div class='inline'><p>Value of @rel, which should only be defined for Node or URI objects.</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Hash{Symbol =&gt; Object}</tt>)</span>
      
      
        <span class='name'>options</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Rendering options passed to Haml render.</p></div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    
    
    
    
    <h3>Options Hash (<tt>options</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="name">haml</span>
          <span class="default">
            
              &mdash; default:
              <tt>haml_template[:property_value]</tt>, <tt>haml_template[:property_values]</tt>
            
          </span>
          &mdash; <div class='inline'><p>Haml template to render. Otherwise, uses haml<em>template[:property</em>value] or haml<em>template[:property</em>values]
depending on the cardinality of objects.</p></div>
        </tr>
      
    </ul>
  
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
        <span class='type'>(<tt>object</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>Yields object.</p></div>
      
    </li>
  
</ul>
<h3>Yield Parameters:</h3>
<ul class="yieldparam">
  
    <li>
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
        <span class='name'>object</span>
      
      
      
    </li>
  
</ul>
<h3>Yield Returns:</h3>
<ul class="yieldreturn">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>The block should only return a string for recursive object definitions.</p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'></span>
      
      
      
      
        
        <div class='inline'><p>String
The rendered document is returned as a string</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


425
426
427
428
429
430
431
432
433
434
435
436</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 425</span>

<span class='def def kw'>def</span> <span class='render_property identifier id'>render_property</span><span class='lparen token'>(</span><span class='predicate identifier id'>predicate</span><span class='comma token'>,</span> <span class='objects identifier id'>objects</span><span class='comma token'>,</span> <span class='property identifier id'>property</span><span class='comma token'>,</span> <span class='rel identifier id'>rel</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='template identifier id'>template</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:haml</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='lparen token'>(</span><span class='objects identifier id'>objects</span><span class='dot token'>.</span><span class='to_a identifier id'>to_a</span><span class='dot token'>.</span><span class='length identifier id'>length</span> <span class='eq op'>==</span> <span class='integer val'>1</span> <span class='question op'>?</span> <span class='symbol val'>:property_value</span> <span class='colon op'>:</span> <span class='symbol val'>:property_values</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span>
    <span class='symbol val'>:objects</span>    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='objects identifier id'>objects</span><span class='comma token'>,</span>
    <span class='symbol val'>:predicate</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='predicate identifier id'>predicate</span><span class='comma token'>,</span>
    <span class='symbol val'>:property</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='property identifier id'>property</span><span class='comma token'>,</span>
    <span class='symbol val'>:rel</span>        <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rel identifier id'>rel</span><span class='comma token'>,</span>
  <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='hamlify identifier id'>hamlify</span><span class='lparen token'>(</span><span class='template identifier id'>template</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='object identifier id'>object</span><span class='bitor op'>|</span>
    <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='object identifier id'>object</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="render_subject-instance_method">
  
    - (<tt>Object</tt>) <strong>render_subject</strong>(subject, predicates, options = {}) {|predicate| ... } <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Render a subject using haml_template[:subject].</p>

<p>The <em>subject</em> template may be called either as a top-level element, or recursively under another element
if the <em>rel</em> local is not nil.</p>

<p>Yields each predicate/property to be rendered separately (@see render<em>property</em>value and
render<em>property</em>values).</p>

<p>The default Haml template is:</p>

<pre class="code"><span class='minus op'>-</span> <span class='if if kw'>if</span> <span class='element identifier id'>element</span> <span class='eq op'>==</span> <span class='symbol val'>:li</span>
  <span class='li identifier id'>li</span><span class='lbrace token'>{</span><span class='symbol val'>:about</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:typeof</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='typeof identifier id'>typeof</span><span class='rbrace token'>}</span>
    <span class='minus op'>-</span> <span class='if if kw'>if</span> <span class='typeof identifier id'>typeof</span>
      <span class='span identifier id'>span</span><span class='dot token'>.</span><span class='type! fid id'>type!</span><span class='assign token'>=</span> <span class='typeof identifier id'>typeof</span>
    <span class='minus op'>-</span> <span class='predicates identifier id'>predicates</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='predicate identifier id'>predicate</span><span class='bitor op'>|</span>
      <span class='neq op'>!=</span> <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='predicate identifier id'>predicate</span><span class='rparen token'>)</span>
<span class='minus op'>-</span> <span class='elsif elsif kw'>elsif</span> <span class='rel identifier id'>rel</span> <span class='andop op'>&amp;&amp;</span> <span class='typeof identifier id'>typeof</span>
  <span class='div identifier id'>div</span><span class='lbrace token'>{</span><span class='symbol val'>:rel</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='rel identifier id'>rel</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
    <span class='div identifier id'>div</span><span class='lbrace token'>{</span><span class='symbol val'>:about</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:typeof</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='typeof identifier id'>typeof</span><span class='rbrace token'>}</span>
      <span class='span identifier id'>span</span><span class='dot token'>.</span><span class='type! fid id'>type!</span><span class='assign token'>=</span> <span class='typeof identifier id'>typeof</span>
      <span class='minus op'>-</span> <span class='predicates identifier id'>predicates</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='predicate identifier id'>predicate</span><span class='bitor op'>|</span>
        <span class='neq op'>!=</span> <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='predicate identifier id'>predicate</span><span class='rparen token'>)</span>
<span class='minus op'>-</span> <span class='elsif elsif kw'>elsif</span> <span class='rel identifier id'>rel</span>
  <span class='div identifier id'>div</span><span class='lbrace token'>{</span><span class='symbol val'>:rel</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='rel identifier id'>rel</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:resource</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
    <span class='minus op'>-</span> <span class='predicates identifier id'>predicates</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='predicate identifier id'>predicate</span><span class='bitor op'>|</span>
      <span class='neq op'>!=</span> <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='predicate identifier id'>predicate</span><span class='rparen token'>)</span>
<span class='minus op'>-</span> <span class='else else kw'>else</span>
  <span class='div identifier id'>div</span><span class='lbrace token'>{</span><span class='symbol val'>:about</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:typeof</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='typeof identifier id'>typeof</span><span class='rbrace token'>}</span>
    <span class='minus op'>-</span> <span class='if if kw'>if</span> <span class='typeof identifier id'>typeof</span>
      <span class='span identifier id'>span</span><span class='dot token'>.</span><span class='type! fid id'>type!</span><span class='assign token'>=</span> <span class='typeof identifier id'>typeof</span>
    <span class='minus op'>-</span> <span class='predicates identifier id'>predicates</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='predicate identifier id'>predicate</span><span class='bitor op'>|</span>
      <span class='neq op'>!=</span> <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='predicate identifier id'>predicate</span><span class='rparen token'>)</span>
</pre>

<p>Return Haml template for document from haml_template[:subject]</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Array&lt;RDF::Resource&gt;</tt>)</span>
      
      
        <span class='name'>subject</span>
      
      
      
        &mdash;
        <div class='inline'><p>Subject to render</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Array&lt;RDF::Resource&gt;</tt>)</span>
      
      
        <span class='name'>predicates</span>
      
      
      
        &mdash;
        <div class='inline'><p>Predicates of subject. Each property is yielded for separate rendering.</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Hash{Symbol =&gt; Object}</tt>)</span>
      
      
        <span class='name'>options</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Rendering options passed to Haml render.</p></div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    <h3>Options Hash (<tt>options</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="name">about</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>About description, a CURIE, URI or Node definition.
May be nil if no @about is rendered (e.g. unreferenced Nodes)</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="name">resource</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Resource description, a CURIE, URI or Node definition.
May be nil if no @resource is rendered</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="name">rel</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Optional @rel property description, a CURIE, URI or Node definition.</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="name">typeof</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>RDF type as a CURIE, URI or Node definition.
If :about is nil, this defaults to the empty string ("").</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>:li</tt>, <tt>nil</tt>)</span>
          <span class="name">element</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Render with <li>, otherwise with template default.</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="name">haml</span>
          <span class="default">
            
              &mdash; default:
              <tt>haml_template[:subject]</tt>
            
          </span>
          &mdash; <div class='inline'><p>Haml template to render.</p></div>
        </tr>
      
    </ul>
  
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
        <span class='type'>(<tt>predicate</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>Yields each predicate</p></div>
      
    </li>
  
</ul>
<h3>Yield Parameters:</h3>
<ul class="yieldparam">
  
    <li>
      
        <span class='type'>(<tt>RDF::URI</tt>)</span>
      
      
        <span class='name'>predicate</span>
      
      
      
    </li>
  
</ul>
<h3>Yield Returns:</h3>
<ul class="yieldreturn">
  
    <li>
      
        <span class='type'>(<tt>:ignored</tt>)</span>
      
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'></span>
      
      
      
      
        
        <div class='inline'><p>String
The rendered document is returned as a string</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


346
347
348
349
350
351
352
353
354
355
356
357
358
359
360</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 346</span>

<span class='def def kw'>def</span> <span class='render_subject identifier id'>render_subject</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='comma token'>,</span> <span class='predicates identifier id'>predicates</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='template identifier id'>template</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:haml</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='symbol val'>:subject</span>
  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span>
    <span class='symbol val'>:about</span>      <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lparen token'>(</span><span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:rel</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='comma token'>,</span>
    <span class='symbol val'>:element</span>    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span>
    <span class='symbol val'>:predicates</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='predicates identifier id'>predicates</span><span class='comma token'>,</span>
    <span class='symbol val'>:rel</span>        <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span>
    <span class='symbol val'>:resource</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lparen token'>(</span><span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:rel</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='comma token'>,</span>
    <span class='symbol val'>:subject</span>    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='subject identifier id'>subject</span><span class='comma token'>,</span>
    <span class='symbol val'>:typeof</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span>
  <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='hamlify identifier id'>hamlify</span><span class='lparen token'>(</span><span class='template identifier id'>template</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='predicate identifier id'>predicate</span><span class='bitor op'>|</span>
    <span class='yield yield kw'>yield</span><span class='lparen token'>(</span><span class='predicate identifier id'>predicate</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='block_given? fid id'>block_given?</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reset-instance_method">
  
    - (<tt>Object</tt>) <strong>reset</strong>  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Reset parser to run again</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


550
551
552
553
554
555
556</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 550</span>

<span class='def def kw'>def</span> <span class='reset identifier id'>reset</span>
  <span class='@depth ivar id'>@depth</span> <span class='assign token'>=</span> <span class='integer val'>0</span>
  <span class='prefixes identifier id'>prefixes</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='@references ivar id'>@references</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='@serialized ivar id'>@serialized</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='@subjects ivar id'>@subjects</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="subject-instance_method">
  
    - (<tt>Nokogiri::XML::Element</tt>, <tt>{Namespace}</tt>) <strong>subject</strong>(subject, options = {})  <span class="extras">(protected)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Display a subject.</p>

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'><p>Displays a subject as a Resource Definition:</p></div></h4>
      <pre class="example code"><span class='lt op'>&lt;</span><span class='div identifier id'>div</span> <span class='typeof identifier id'>typeof</span><span class='assign token'>=</span><span class='string val'>&quot;rdfs:Resource&quot;</span> <span class='about identifier id'>about</span><span class='assign token'>=</span><span class='string val'>&quot;http://example.com/resource&quot;</span><span class='gt op'>&gt;</span>
  <span class='lt op'>&lt;</span><span class='h1 identifier id'>h1</span> <span class='property identifier id'>property</span><span class='assign token'>=</span><span class='string val'>&quot;dc:title&quot;</span><span class='gt op'>&gt;</span><span class='label identifier id'>label</span><span class='lt op'>&lt;</span><span class='regexp val'>/h1&gt;
  &lt;ul&gt;
    &lt;li content=&quot;2009-04-30T06:15:51Z&quot; property=&quot;dc:created&quot;&gt;2009-04-30T06:15:51+00:00&lt;/</span><span class='li identifier id'>li</span><span class='gt op'>&gt;</span>
  <span class='lt op'>&lt;</span><span class='regexp val'>/ul&gt;
&lt;/</span><span class='div identifier id'>div</span><span class='gt op'>&gt;</span>
</pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
        <span class='name'>subject</span>
      
      
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Hash{Symbol =&gt; Object}</tt>)</span>
      
      
        <span class='name'>options</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

  
    
    
    
    
    <h3>Options Hash (<tt>options</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>:li</tt>, <tt>nil</tt>)</span>
          <span class="name">:element(:div)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>Serialize using <li> rather than template default element</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>RDF::Resource</tt>)</span>
          <span class="name">:rel</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash; <div class='inline'><p>Optional @rel property</p></div>
        </tr>
      
    </ul>
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Nokogiri::XML::Element</tt>, <tt>{Namespace}</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 577</span>

<span class='def def kw'>def</span> <span class='subject identifier id'>subject</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='comma token'>,</span> <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='is_done? fid id'>is_done?</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='rparen token'>)</span>
  
  <span class='subject_done identifier id'>subject_done</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='rparen token'>)</span>
  
  <span class='properties identifier id'>properties</span> <span class='assign token'>=</span> <span class='@graph ivar id'>@graph</span><span class='dot token'>.</span><span class='properties identifier id'>properties</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='rparen token'>)</span>
  <span class='prop_list identifier id'>prop_list</span> <span class='assign token'>=</span> <span class='order_properties identifier id'>order_properties</span><span class='lparen token'>(</span><span class='properties identifier id'>properties</span><span class='rparen token'>)</span>
  
  <span class='comment val'># Find appropriate template</span>
  <span class='curie identifier id'>curie</span> <span class='opasgn op'>||=</span> <span class='case case kw'>case</span>
  <span class='when when kw'>when</span> <span class='subject identifier id'>subject</span><span class='dot token'>.</span><span class='node? fid id'>node?</span>
    <span class='subject identifier id'>subject</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='if if_mod kw'>if</span> <span class='ref_count identifier id'>ref_count</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='rparen token'>)</span> <span class='geq op'>&gt;=</span> <span class='lparen token'>(</span><span class='@depth ivar id'>@depth</span> <span class='eq op'>==</span> <span class='integer val'>0</span> <span class='question op'>?</span> <span class='integer val'>0</span> <span class='colon op'>:</span> <span class='integer val'>1</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='typeof identifier id'>typeof</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='properties identifier id'>properties</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='RDF constant id'>RDF</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rparen token'>)</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='compact identifier id'>compact</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='r identifier id'>r</span><span class='bitor op'>|</span> <span class='get_curie identifier id'>get_curie</span><span class='lparen token'>(</span><span class='r identifier id'>r</span><span class='rparen token'>)</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span>
  <span class='typeof identifier id'>typeof</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span> <span class='if if_mod kw'>if</span> <span class='typeof identifier id'>typeof</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  
  <span class='comment val'># Nodes without a curie need a blank @typeof to generate a subject</span>
  <span class='typeof identifier id'>typeof</span> <span class='opasgn op'>||=</span> <span class='string val'>&quot;&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='curie identifier id'>curie</span>
  <span class='prop_list identifier id'>prop_list</span> <span class='opasgn op'>-=</span> <span class='lbrack token'>[</span><span class='RDF constant id'>RDF</span><span class='dot token'>.</span><span class='type identifier id'>type</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span>

  <span class='add_debug identifier id'>add_debug</span> <span class='dstring node'>&quot;subject: #{curie.inspect}, typeof: #{typeof.inspect}, props: #{prop_list.inspect}&quot;</span>

  <span class='comment val'># Render this subject</span>
  <span class='comment val'># If :rel is specified and :typeof is nil, use @resource instead of @about.</span>
  <span class='comment val'># Pass other options from calling context</span>
  <span class='render_opts identifier id'>render_opts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:typeof</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='typeof identifier id'>typeof</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='render_subject identifier id'>render_subject</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='comma token'>,</span> <span class='prop_list identifier id'>prop_list</span><span class='comma token'>,</span> <span class='render_opts identifier id'>render_opts</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='pred identifier id'>pred</span><span class='bitor op'>|</span>
    <span class='depth identifier id'>depth</span> <span class='do do kw'>do</span>
      <span class='values identifier id'>values</span> <span class='assign token'>=</span> <span class='properties identifier id'>properties</span><span class='lbrack token'>[</span><span class='pred identifier id'>pred</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span>
      <span class='add_debug identifier id'>add_debug</span> <span class='dstring node'>&quot;subject: #{get_curie(subject)}, pred: #{get_curie(pred)}, values: #{values.inspect}&quot;</span>
      <span class='predicate identifier id'>predicate</span><span class='lparen token'>(</span><span class='pred identifier id'>pred</span><span class='comma token'>,</span> <span class='values identifier id'>values</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write_epilogue-instance_method">
  
    - <strong>write_epilogue</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Outputs the XHTML+RDFa representation of all stored triples.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 190</span>

<span class='def def kw'>def</span> <span class='write_epilogue identifier id'>write_epilogue</span>
  <span class='@base_uri ivar id'>@base_uri</span> <span class='assign token'>=</span> <span class='RDF constant id'>RDF</span><span class='colon2 op'>::</span><span class='URI constant id'>URI</span><span class='lparen token'>(</span><span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:base_uri</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:base_uri</span><span class='rbrack token'>]</span>
  <span class='@lang ivar id'>@lang</span> <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:lang</span><span class='rbrack token'>]</span>
  <span class='@debug ivar id'>@debug</span> <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:debug</span><span class='rbrack token'>]</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='reset identifier id'>reset</span>

  <span class='add_debug identifier id'>add_debug</span> <span class='dstring node'>&quot;\nserialize: graph size: #{@graph.size}&quot;</span>

  <span class='preprocess identifier id'>preprocess</span>

  <span class='comment val'># Profiles</span>
  <span class='profile identifier id'>profile</span> <span class='assign token'>=</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:profiles</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='@options ivar id'>@options</span><span class='lbrack token'>[</span><span class='symbol val'>:profiles</span><span class='rbrack token'>]</span>

  <span class='comment val'># Prefixes</span>
  <span class='prefix identifier id'>prefix</span> <span class='assign token'>=</span> <span class='prefixes identifier id'>prefixes</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='map identifier id'>map</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='pk identifier id'>pk</span><span class='bitor op'>|</span> <span class='dstring node'>&quot;#{pk}: #{prefixes[pk]}&quot;</span><span class='rbrace token'>}</span><span class='dot token'>.</span><span class='sort identifier id'>sort</span><span class='dot token'>.</span><span class='join identifier id'>join</span><span class='lparen token'>(</span><span class='string val'>&quot; &quot;</span><span class='rparen token'>)</span> <span class='unless unless_mod kw'>unless</span> <span class='prefixes identifier id'>prefixes</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
  <span class='add_debug identifier id'>add_debug</span> <span class='dstring node'>&quot;\nserialize: prefixes: #{prefix.inspect}&quot;</span>

  <span class='subjects identifier id'>subjects</span> <span class='assign token'>=</span> <span class='order_subjects identifier id'>order_subjects</span>
  
  <span class='comment val'># Take title from first subject having a heading predicate</span>
  <span class='doc_title identifier id'>doc_title</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='titles identifier id'>titles</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='heading_predicates identifier id'>heading_predicates</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='pred identifier id'>pred</span><span class='bitor op'>|</span>
    <span class='@graph ivar id'>@graph</span><span class='dot token'>.</span><span class='query identifier id'>query</span><span class='lparen token'>(</span><span class='symbol val'>:predicate</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='pred identifier id'>pred</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='statement identifier id'>statement</span><span class='bitor op'>|</span>
      <span class='titles identifier id'>titles</span><span class='lbrack token'>[</span><span class='statement identifier id'>statement</span><span class='dot token'>.</span><span class='subject identifier id'>subject</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='statement identifier id'>statement</span><span class='dot token'>.</span><span class='object identifier id'>object</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='title_subject identifier id'>title_subject</span> <span class='assign token'>=</span> <span class='subjects identifier id'>subjects</span><span class='dot token'>.</span><span class='detect identifier id'>detect</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='subject identifier id'>subject</span><span class='bitor op'>|</span> <span class='titles identifier id'>titles</span><span class='lbrack token'>[</span><span class='subject identifier id'>subject</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span>
  <span class='doc_title identifier id'>doc_title</span> <span class='assign token'>=</span> <span class='titles identifier id'>titles</span><span class='lbrack token'>[</span><span class='title_subject identifier id'>title_subject</span><span class='rbrack token'>]</span>

  <span class='comment val'># Generate document</span>
  <span class='doc identifier id'>doc</span> <span class='assign token'>=</span> <span class='render_document identifier id'>render_document</span><span class='lparen token'>(</span><span class='subjects identifier id'>subjects</span><span class='comma token'>,</span>
    <span class='symbol val'>:lang</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@lang ivar id'>@lang</span><span class='comma token'>,</span>
    <span class='symbol val'>:base</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@base_uri ivar id'>@base_uri</span><span class='comma token'>,</span>
    <span class='symbol val'>:title</span>    <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='doc_title identifier id'>doc_title</span><span class='comma token'>,</span>
    <span class='symbol val'>:profile</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='profile identifier id'>profile</span><span class='comma token'>,</span>
    <span class='symbol val'>:prefix</span>   <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='prefix identifier id'>prefix</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='s identifier id'>s</span><span class='bitor op'>|</span>
    <span class='subject identifier id'>subject</span><span class='lparen token'>(</span><span class='s identifier id'>s</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='@output ivar id'>@output</span><span class='dot token'>.</span><span class='write identifier id'>write</span><span class='lparen token'>(</span><span class='doc identifier id'>doc</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write_graph-instance_method">
  
    - <strong>write_graph</strong>(graph) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Write whole graph</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Graph.html" title="RDF::Graph (class)">Graph</a></span></tt>)</span>
      
      
        <span class='name'>graph</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 162</span>

<span class='def def kw'>def</span> <span class='write_graph identifier id'>write_graph</span><span class='lparen token'>(</span><span class='graph identifier id'>graph</span><span class='rparen token'>)</span>
  <span class='@graph ivar id'>@graph</span> <span class='assign token'>=</span> <span class='graph identifier id'>graph</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write_statement-instance_method">
  
    - <strong>write_statement</strong>(statement) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Addes a statement to be serialized</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>RDF::Statement</tt>)</span>
      
      
        <span class='name'>statement</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


170
171
172</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 170</span>

<span class='def def kw'>def</span> <span class='write_statement identifier id'>write_statement</span><span class='lparen token'>(</span><span class='statement identifier id'>statement</span><span class='rparen token'>)</span>
  <span class='@graph ivar id'>@graph</span><span class='dot token'>.</span><span class='insert identifier id'>insert</span><span class='lparen token'>(</span><span class='statement identifier id'>statement</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write_triple-instance_method">
  
    - <strong>write_triple</strong>(subject, predicate, object) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This method is abstract.</strong> 
  <div class='inline'></div>
</div>
<p class="note returns_void">This method returns an undefined value.</p><p>Addes a triple to be serialized</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>RDF::Resource</tt>)</span>
      
      
        <span class='name'>subject</span>
      
      
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>RDF::URI</tt>)</span>
      
      
        <span class='name'>predicate</span>
      
      
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>RDF::Value</tt>)</span>
      
      
        <span class='name'>object</span>
      
      
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>unless implemented in subclass</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


182
183
184</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/rdfa/writer.rb', line 182</span>

<span class='def def kw'>def</span> <span class='write_triple identifier id'>write_triple</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='comma token'>,</span> <span class='predicate identifier id'>predicate</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='rparen token'>)</span>
  <span class='@graph ivar id'>@graph</span><span class='dot token'>.</span><span class='insert identifier id'>insert</span><span class='lparen token'>(</span><span class='Statement constant id'>Statement</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='subject identifier id'>subject</span><span class='comma token'>,</span> <span class='predicate identifier id'>predicate</span><span class='comma token'>,</span> <span class='object identifier id'>object</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Fri Apr 29 10:44:45 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.5 (ruby-1.8.7).
</div>

  </body>
</html>